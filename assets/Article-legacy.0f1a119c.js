!function(){var e=["src"];function t(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}function i(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(l){s=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,s,"next",e)}function s(e){v(a,n,o,i,s,"throw",e)}i(void 0)}))}}var x=document.createElement("style");x.innerHTML=".am-list .am-list-item.am-textarea-item{display:flex;align-items:flex-start;box-sizing:border-box;min-height:44px;padding-left:15px;padding-right:15px;border-bottom:1PX solid #ddd}@media (min-resolution: 2dppx){html:not([data-scale]) .am-list .am-list-item.am-textarea-item{border-bottom:none}html:not([data-scale]) .am-list .am-list-item.am-textarea-item:after{content:\"\";position:absolute;background-color:#ddd;display:block;z-index:1;top:auto;right:auto;bottom:0;left:0;width:100%;height:1PX;transform-origin:50% 100%;transform:scaleY(.5)}}@media (min-resolution: 2dppx) and (min-resolution: 3dppx){html:not([data-scale]) .am-list .am-list-item.am-textarea-item:after{transform:scaleY(.33)}}.am-list .am-list-item.am-textarea-item.am-textarea-item-single-line{align-items:center}.am-list .am-list-item.am-textarea-item.am-textarea-item-single-line .am-textarea-label{align-self:center}.am-list .am-list-item.am-textarea-item.am-textarea-item-single-line .am-textarea-control{padding-top:0;padding-bottom:0}.am-list .am-list-item.am-textarea-item.am-textarea-item-single-line .am-textarea-control textarea{line-height:25.5px}.am-list .am-list-item.am-textarea-item.am-textarea-item-single-line .am-textarea-clear{margin-top:0}.am-list .am-list-item.am-textarea-item.am-textarea-item-single-line.am-textarea-error .am-textarea-error-extra{margin-top:0}.am-textarea-label{align-self:flex-start;color:#000;text-align:left;min-height:44px;font-size:17px;line-height:44px;margin-left:0;margin-right:5px;white-space:nowrap;overflow:hidden}.am-textarea-label.am-textarea-label-2{width:34px}.am-textarea-label.am-textarea-label-3{width:51px}.am-textarea-label.am-textarea-label-4{width:68px}.am-textarea-label.am-textarea-label-5{width:85px}.am-textarea-label.am-textarea-label-6{width:102px}.am-textarea-label.am-textarea-label-7{width:119px}.am-textarea-control{flex:1;padding-top:10px;padding-bottom:9px}.am-textarea-control textarea{color:#000;font-size:17px;line-height:25.5px;appearance:none;width:100%;padding:0;border:0;background-color:transparent;overflow:visible;display:block;resize:none;word-break:break-word;word-wrap:break-word}.am-textarea-control textarea::placeholder{color:#bbb}.am-textarea-control textarea:disabled{color:#bbb;background-color:#fff}.am-textarea-clear{display:none;width:21px;height:21px;margin-top:12px;border-radius:50%;overflow:hidden;font-style:normal;color:#fff;background-color:#ccc;background-repeat:no-repeat;background-size:21px auto;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg%20fill%3D'%23fff'%20width%3D'24'%20height%3D'24'%20viewBox%3D'0%200%2024%2024'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M19%206.41L17.59%205%2012%2010.59%206.41%205%205%206.41%2010.59%2012%205%2017.59%206.41%2019%2012%2013.41%2017.59%2019%2019%2017.59%2013.41%2012z'%2F%3E%3Cpath%20d%3D'M0%200h24v24H0z'%20fill%3D'none'%2F%3E%3C%2Fsvg%3E\")}.am-textarea-clear-active{background-color:#108ee9}.am-textarea-focus .am-textarea-clear{display:block}.am-textarea-has-count{padding-bottom:14px}.am-textarea-count{position:absolute;bottom:6px;right:5px;color:#bbb;font-size:14px}.am-textarea-count span{color:#000}.am-textarea-error .am-textarea-control textarea{color:#f50}.am-textarea-error .am-textarea-error-extra{margin-top:12px;width:21px;height:21px;margin-left:8px;background-size:21px 21px;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D'18'%20height%3D'18'%20viewBox%3D'0%200%2018%2018'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cg%20stroke%3D'none'%20stroke-width%3D'1'%20fill%3D'none'%20fill-rule%3D'evenodd'%3E%3Cg%20transform%3D'translate(-300.000000%2C%20-1207.000000)'%20fill%3D'%23FF5500'%3E%3Cg%20id%3D'exclamation-circle-o'%20transform%3D'translate(300.000000%2C%201207.000000)'%3E%3Cpath%20d%3D'M9%2C16.734375%20C10.0441406%2C16.734375%2011.0566406%2C16.5304688%2012.009375%2C16.1279297%20C12.9304688%2C15.7376953%2013.7566406%2C15.1804687%2014.4685547%2C14.4703125%20C15.1787109%2C13.7601563%2015.7376953%2C12.9322266%2016.1261719%2C12.0111328%20C16.5304688%2C11.0566406%2016.734375%2C10.0441406%2016.734375%2C9%20C16.734375%2C7.95585938%2016.5304688%2C6.94335938%2016.1279297%2C5.990625%20C15.7376953%2C5.06953125%2015.1804687%2C4.24335938%2014.4703125%2C3.53144531%20C13.7601563%2C2.82128906%2012.9322266%2C2.26230469%2012.0111328%2C1.87382813%20C11.0566406%2C1.46953125%2010.0441406%2C1.265625%209%2C1.265625%20C7.95585938%2C1.265625%206.94335938%2C1.46953125%205.990625%2C1.87207031%20C5.06953125%2C2.26230469%204.24335938%2C2.81953125%203.53144531%2C3.5296875%20C2.82128906%2C4.23984375%202.26230469%2C5.06777344%201.87382813%2C5.98886719%20C1.46953125%2C6.94335938%201.265625%2C7.95585938%201.265625%2C9%20C1.265625%2C10.0441406%201.46953125%2C11.0566406%201.87207031%2C12.009375%20C2.26230469%2C12.9304688%202.81953125%2C13.7566406%203.5296875%2C14.4685547%20C4.23984375%2C15.1787109%205.06777344%2C15.7376953%205.98886719%2C16.1261719%20C6.94335938%2C16.5304688%207.95585938%2C16.734375%209%2C16.734375%20L9%2C16.734375%20Z%20M9%2C18%20C4.02890625%2C18%200%2C13.9710937%200%2C9%20C0%2C4.02890625%204.02890625%2C0%209%2C0%20C13.9710937%2C0%2018%2C4.02890625%2018%2C9%20C18%2C13.9710937%2013.9710937%2C18%209%2C18%20L9%2C18%20L9%2C18%20Z%20M9%2C6.75%20C8.61152344%2C6.75%208.296875%2C7.06464844%208.296875%2C7.453125%20L8.296875%2C13.9394531%20C8.296875%2C14.3279297%208.61152344%2C14.6425781%209%2C14.6425781%20C9.38847656%2C14.6425781%209.703125%2C14.3279297%209.703125%2C13.9394531%20L9.703125%2C7.453125%20C9.703125%2C7.06464844%209.38847656%2C6.75%209%2C6.75%20L9%2C6.75%20Z%20M8.20898438%2C4.83398438%20C8.20898438%2C5.27085024%208.56313413%2C5.625%209%2C5.625%20C9.43686587%2C5.625%209.79101562%2C5.27085024%209.79101562%2C4.83398438%20C9.79101562%2C4.39711851%209.43686587%2C4.04296875%209%2C4.04296875%20C8.56313413%2C4.04296875%208.20898438%2C4.39711851%208.20898438%2C4.83398438%20L8.20898438%2C4.83398438%20Z'%20id%3D'Shape'%20transform%3D'translate(9.000000%2C%209.000000)%20scale(1%2C%20-1)%20translate(-9.000000%2C%20-9.000000)%20'%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\")}.am-textarea-disabled .am-textarea-label{color:#bbb}.am-list-body .am-list-item:last-child{border-bottom:0}.am-list-body .am-list-item:last-child:after{display:none!important}.am-indexed-list-section-body.am-list-body,.am-indexed-list-section-body.am-list-body .am-list-item:last-child .am-list-line{border-bottom:0}.am-indexed-list-section-body.am-list-body:after,.am-indexed-list-section-body.am-list-body .am-list-item:last-child .am-list-line:after{display:none!important}.am-indexed-list-section-header.am-list-body,.am-indexed-list-section-header.am-list-body .am-list-item .am-list-line{border-bottom:0}.am-indexed-list-section-header.am-list-body:after,.am-indexed-list-section-header.am-list-body .am-list-item .am-list-line:after{display:none!important}.am-indexed-list-section-header .am-list-item{height:30px;min-height:30px;background-color:#f5f5f9}.am-indexed-list-section-header .am-list-item .am-list-line{height:30px;min-height:30px}.am-indexed-list-section-header .am-list-item .am-list-content{font-size:14px!important;color:#888!important}.am-indexed-list-quick-search-bar{position:fixed;top:0;right:0;z-index:0;text-align:center;color:#108ee9;font-size:16px;list-style:none;padding:0}.am-indexed-list-quick-search-bar li{padding:0 5px}.am-indexed-list-quick-search-bar-over{background-color:#0006}.am-indexed-list-qsindicator{position:absolute;left:50%;top:50%;margin:-15px auto auto -30px;width:60px;height:30px;background:transparent;opacity:.7;color:#0af;font-size:20px;border-radius:30px;z-index:1999;text-align:center;line-height:30px}.am-indexed-list-qsindicator-hide{display:none}.pull-list .am-list-body{background-color:transparent}.pull-list .pull-list-footer{padding:12px;text-align:center}.am-pull-to-refresh-content{transform-origin:left top 0}.am-pull-to-refresh-content-wrapper{overflow:hidden}.am-pull-to-refresh-transition{transition:transform .3s}.am-pull-to-refresh-indicator{color:gray;text-align:center;height:25px}.am-pull-to-refresh-down .am-pull-to-refresh-indicator{margin-top:-25px}.am-pull-to-refresh-up .am-pull-to-refresh-indicator{margin-bottom:-25px}.rvt-body-light .article-row-item .header,.rvt-body-light .article-detail .header{font-size:14px;color:#565656}.rvt-body-light .article-row-item .secd,.rvt-body-light .article-detail .secd{font-size:12px;font-weight:400;color:#565656}.rvt-body-light .article-row-item .title,.rvt-body-light .article-detail .title{margin:16px 0;font-size:16px;color:#2f2f2f;font-weight:600}.rvt-body-light .article-row-item .content,.rvt-body-light .article-detail .content{font-size:14px;color:#565656}.rvt-body-light .article-row-item .hidecontent,.rvt-body-light .article-detail .hidecontent{word-break:break-all;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.rvt-body-light .article-list-gap{height:15px}.rvt-body-light .article-underbar{box-sizing:border-box;color:#9c9c9c;font-size:14px;width:100vw;height:40px;position:fixed;bottom:0;left:0;padding:16px;box-shadow:0 0 5px 2px #f5f5f5;background-color:#fff}.rvt-body-light .article-underbar .fake-input{box-sizing:border-box;font-size:12px;width:66%;height:28px;line-height:28px;border-radius:14px;padding:0 16px;background-color:#f5f5f5;border:none}.rvt-body-dark .article-row-item .header,.rvt-body-dark .article-detail .header{font-size:14px;color:#b1b1b1}.rvt-body-dark .article-row-item .secd,.rvt-body-dark .article-detail .secd{font-size:12px;font-weight:400;color:#b1b1b1}.rvt-body-dark .article-row-item .title,.rvt-body-dark .article-detail .title{margin:16px 0;font-size:16px;color:#aeaeae;font-weight:600}.rvt-body-dark .article-row-item .content,.rvt-body-dark .article-detail .content{font-size:14px;color:#b1b1b1}.rvt-body-dark .article-row-item .hidecontent,.rvt-body-dark .article-detail .hidecontent{word-break:break-all;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.rvt-body-dark .article-list-gap{height:15px}.rvt-body-dark .article-underbar{box-sizing:border-box;color:#868686;font-size:14px;width:100vw;height:40px;position:fixed;bottom:0;left:0;padding:16px;box-shadow:0 0 5px 2px #363636;background-color:#3f3f3f}.rvt-body-dark .article-underbar .fake-input{box-sizing:border-box;font-size:12px;width:66%;height:28px;line-height:28px;border-radius:14px;padding:0 16px;background-color:#363636;border:none}\n",document.head.appendChild(x),System.register(["./vendor-legacy.5036a1d2.js","./getLocale-legacy.35adcf7c.js","./index-legacy.6a4350a2.js"],(function(i){"use strict";var l,d,m,g,v,x,y,w,C,S,E,R,k,_,T,P,z,L,N,O,D,H,I,B,j,M,F,V,A,q,W,Y;return{setters:[function(e){l=e.o,d=e.c,m=e.q,g=e.s,v=e.x,x=e.y,y=e.z,w=e.D,C=e.E,S=e.R,E=e.r,R=e.a,k=e.F,_=e.u,T=e.G,P=e.H,z=e.I,L=e.J,N=e.K},function(e){O=e.i,D=e.I,H=e.T,I=e._,B=e.C,j=e.d,M=e.M,F=e.R,V=e.a,A=e.L,q=e.g},function(e){W=e.m,Y=e.s}],execute:function(){var U;function Q(e){return X.apply(this,arguments)}function X(){return(X=b(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,s,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tag,n=t.author,o=t.favorited,a=t.pageSize,i=void 0===a?20:a,s=t.pageNum,l=void 0===s?0:s,e.prev=1,e.next=4,O.get("/articles",{params:{tag:r,author:n,favorited:o,limit:i,offset:l},loading:!0});case 4:return c=e.sent,e.abrupt("return",{list:c.data.articles,total:c.data.articlesCount});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{list:[],total:0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Z(e){return K.apply(this,arguments)}function K(){return(K=b(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.prev=1,e.next=4,O.get("/articles/".concat(r),{loading:!0});case 4:return n=e.sent,e.abrupt("return",n.data.article||{});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function G(e){return J.apply(this,arguments)}function J(){return(J=b(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.prev=1,e.next=4,O.post("/articles/".concat(r,"/favorite"),{},{loading:!0});case 4:if(200===e.sent.status){e.next=7;break}throw new Error("点赞失败");case 7:return e.abrupt("return",1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",-1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=b(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.prev=1,e.next=4,O.delete("/articles/".concat(r,"/favorite"),{loading:!0});case 4:if(200===e.sent.status){e.next=7;break}throw new Error("点赞失败");case 7:return e.abrupt("return",1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",-1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function te(e){return re.apply(this,arguments)}function re(){return(re=b(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.prev=1,e.next=4,O.get("/articles/".concat(r,"/comments"));case 4:return n=e.sent,e.abrupt("return",n.data.comments||[]);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ne(e){return oe.apply(this,arguments)}function oe(){return(oe=b(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,n=t.body,e.prev=1,e.next=4,O.post("/articles/".concat(r,"/comments"),{comment:{body:n}});case 4:if(200===e.sent.status){e.next=7;break}throw new Error("失败");case 7:return e.abrupt("return",1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",-1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function ae(e){return ie.apply(this,arguments)}function ie(){return(ie=b(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,n=t.id,e.prev=1,e.next=4,O.delete("/articles/".concat(r,"/comments/").concat(n));case 4:if(!((o=e.sent).status<200||o.status>300)){e.next=7;break}throw new Error("失败");case 7:return e.abrupt("return",1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",-1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function se(){return le.apply(this,arguments)}function le(){return(le=b(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get("/tags");case 3:return t=e.sent,e.abrupt("return",t.data.tags);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ce(e){return ue.apply(this,arguments)}function ue(){return(ue=b(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,e.prev=1,e.next=4,O.get("/profiles/".concat(r));case 4:return n=e.sent,e.abrupt("return",n.data.profile);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}i({MyArticles:function(e){var t=Ct();return S.createElement("div",{style:t.root},S.createElement(F,{title:"我的文章"}),S.createElement(St,{username:Y.getState().app.uinfo.username,type:e.match.params.type}))},Posts:function(e){var t,r,n,o,a=ze(),i=_(),s=f(d.exports.useState({}),2),l=s[0],c=s[1],u=f(d.exports.useState([]),2),p=u[0],h=u[1],m=d.exports.useMemo((function(){return p.length}),[p]);d.exports.useEffect((function(){v(),x()}),[]);var g=d.exports.useMemo((function(){return Object.keys(l).length>0}),[l]),v=d.exports.useCallback(b(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null==e||null===(r=e.match)||void 0===r||null===(n=r.params)||void 0===n?void 0:n.slug,t.t0=o,!t.t0){t.next=8;break}return t.t1=c,t.next=6,Z({slug:o});case 6:t.t2=t.sent,(0,t.t1)(t.t2);case 8:case"end":return t.stop()}}),t)}))),[]),x=d.exports.useCallback(b(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null==e||null===(r=e.match)||void 0===r||null===(n=r.params)||void 0===n?void 0:n.slug,t.t0=o,!t.t0){t.next=8;break}return t.t1=h,t.next=6,te({slug:o});case 6:t.t2=t.sent,(0,t.t1)(t.t2);case 8:case"end":return t.stop()}}),t)}))),[]);return S.createElement("div",{className:"rvt-headerview article-detail",style:a.root},S.createElement(F,null),g?S.createElement("div",{style:a.article},S.createElement("div",{className:"title"},l.title),S.createElement("div",{className:"f-r j-between a-center"},S.createElement("div",{className:"f-r a-center"},S.createElement(Re,{className:"user-img",src:null==l||null===(t=l.author)||void 0===t?void 0:t.image,style:a.userImg,onClick:function(e){var t;e.stopPropagation(),i.push("/profile/".concat(null==l||null===(t=l.author)||void 0===t?void 0:t.username))}}),S.createElement("div",null,S.createElement("div",{className:"header",onClick:function(e){var t;e.stopPropagation(),i.push("/profile/".concat(null==l||null===(t=l.author)||void 0===t?void 0:t.username))}},(null==l||null===(r=l.author)||void 0===r?void 0:r.username)||"示例昵称"),S.createElement("div",{className:"secd"},l.updateAt||"1小时前"))),S.createElement("div",{style:a.guanzhu},"关注")),S.createElement("div",{className:"content",style:a.articleContent},l.body),S.createElement("div",null,S.createElement(_e,{comments:p,slug:null==e||null===(n=e.match)||void 0===n||null===(o=n.params)||void 0===o?void 0:o.slug,updateComments:x})),S.createElement(we,{data:l,commentCount:m,updateComments:x})):null)},Profile:function(e){var t=Et(),r=_(),n=f(d.exports.useState({}),2),o=n[0],a=n[1];d.exports.useEffect((function(){i()}),[]);var i=d.exports.useCallback(b(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,ce({username:e.match.params.username});case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)}))),[]);return S.createElement("div",null,S.createElement("div",{style:t.header,className:"f-r j-center a-center"},S.createElement(wt,{style:t.backBtn,onClick:r.goBack}),S.createElement("img",{style:t.viteImg,src:"./assets/favicon.17e50649.svg"})),S.createElement("div",{style:t.profileDiv},S.createElement(Re,{className:"user-img lg",style:t.avatar,src:o.image}),S.createElement("div",{className:"f-r j-end"},S.createElement("div",{style:t.editBtn},"编辑资料")),S.createElement("div",null,S.createElement("div",{style:t.username},o.username||"..."),S.createElement("div",{style:t.bio},o.bio||"暂无简介"))),S.createElement(St,{username:e.match.params.username}))},default:function(){var e=f(d.exports.useState([]),2),t=e[0],r=e[1],n=f(d.exports.useState({}),2),o=n[0],a=n[1];d.exports.useEffect((function(){function e(){return(e=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,se();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var i=d.exports.useCallback((function(e){var t=e.title,r="全部"===t?null:t;a(p(p({},o),{},{tag:r}))}),[o]);return S.createElement("div",{className:"rvt-tabview"},S.createElement("div",{className:"am-navbar"},S.createElement(yt,{tags:t,onTabChange:i})),S.createElement("div",{style:{paddingTop:"36px",boxSizing:"border-box"}},S.createElement(vt,{query:o,offset:!0})))}});var de=l(d.exports.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})),pe=l(d.exports.createElement("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})),he=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};function fe(){}var me=/[\uD800-\uDBFF][\uDC00-\uDFFF]|\n/g;var ge=function(e){function t(e){g(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.focus=function(){r.textareaRef.focus()},r.reAlignHeight=function(){var e=r.textareaRef;e.style.height="",e.style.height=e.scrollHeight+"px"},r.onChange=function(e){var t=e.target.value;"value"in r.props?r.setState({value:r.props.value}):r.setState({value:t});var n=r.props.onChange;n&&n(t),r.componentDidUpdate()},r.onBlur=function(e){r.debounceTimeout=setTimeout((function(){document.activeElement!==r.textareaRef&&r.setState({focus:!1})}),100);var t=e.currentTarget.value;r.props.onBlur&&(setTimeout((function(){document.body&&(document.body.scrollTop=document.body.scrollTop)}),100),r.props.onBlur(t))},r.onFocus=function(e){r.debounceTimeout&&(clearTimeout(r.debounceTimeout),r.debounceTimeout=null),r.setState({focus:!0});var t=e.currentTarget.value;r.props.onFocus&&r.props.onFocus(t)},r.onErrorClick=function(){r.props.onErrorClick&&r.props.onErrorClick()},r.clearInput=function(){r.setState({value:""}),r.props.onChange&&r.props.onChange("")},r.state={focus:!1,value:e.value||e.defaultValue||""},r}return m(t,e),x(t,[{key:"componentWillReceiveProps",value:function(e){var t;"value"in e&&this.setState({value:(t=e.value,null==t?"":t)})}},{key:"componentDidMount",value:function(){this.props.autoHeight&&this.reAlignHeight()}},{key:"componentDidUpdate",value:function(){this.props.autoHeight&&this.reAlignHeight()}},{key:"componentWillUnmount",value:function(){this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null)}},{key:"render",value:function(){var e,t,r=this,n=this.props,o=n.prefixCls,a=n.prefixListCls,i=n.editable,s=n.style,l=n.clear;n.children;var c=n.error,u=n.className,p=n.count,h=n.labelNumber,f=n.title;n.onErrorClick;var m=n.autoHeight;n.defaultValue;var g=he(n,["prefixCls","prefixListCls","editable","style","clear","children","error","className","count","labelNumber","title","onErrorClick","autoHeight","defaultValue"]),v=g.disabled,b=this.state,x=b.value,S=b.focus,E=p>0&&this.props.rows>1,R=y(u,a+"-item",o+"-item",(w(e={},o+"-disabled",v),w(e,o+"-item-single-line",1===this.props.rows&&!m),w(e,o+"-error",c),w(e,o+"-focus",S),w(e,o+"-has-count",E),e)),k=y(o+"-label",(w(t={},o+"-label-2",2===h),w(t,o+"-label-3",3===h),w(t,o+"-label-4",4===h),w(t,o+"-label-5",5===h),w(t,o+"-label-6",6===h),w(t,o+"-label-7",7===h),t)),_=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(me,"_").length}(x),T={};if(p>0)if(D){var P=x?x.replace(me,"_"):"",z=P?P.split("_").length-1:0;T.maxLength=p+z-_+(x?x.length:0)}else T.maxLength=p-_+(x?x.length:0);return d.exports.createElement("div",{className:R},f&&d.exports.createElement("div",{className:k},f),d.exports.createElement("div",{className:o+"-control"},d.exports.createElement("textarea",C({ref:function(e){return r.textareaRef=e}},T,g,{value:x,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,readOnly:!i,style:s}))),l&&i&&x&&_>0&&d.exports.createElement(H,{activeClassName:o+"-clear-active"},d.exports.createElement("div",{className:o+"-clear",onClick:this.clearInput})),c&&d.exports.createElement("div",{className:o+"-error-extra",onClick:this.onErrorClick}),E&&d.exports.createElement("span",{className:o+"-count"},d.exports.createElement("span",null,x?_:0),"/",p))}}]),t}(d.exports.Component);ge.defaultProps={prefixCls:"am-textarea",prefixListCls:"am-list",autoHeight:!1,editable:!0,disabled:!1,placeholder:"",clear:!1,rows:1,onChange:fe,onBlur:fe,onFocus:fe,onErrorClick:fe,error:!1,labelNumber:5};var ve=l(d.exports.createElement("path",{d:"M2 20h2c.55 0 1-.45 1-1v-9c0-.55-.45-1-1-1H2v11zm19.83-7.12c.11-.25.17-.52.17-.8V11c0-1.1-.9-2-2-2h-5.5l.92-4.65c.05-.22.02-.46-.08-.66-.23-.45-.52-.86-.88-1.22L14 2 7.59 8.41C7.21 8.79 7 9.3 7 9.83v7.84C7 18.95 8.05 20 9.34 20h8.11c.7 0 1.36-.37 1.72-.97l2.66-6.15z"})),be=W((function(e){return{favouriteStyle:{fontSize:"14px",color:e.fc.active},unFavouriteStyle:{fontSize:"14px",color:e.fc.desc}}}));function xe(e){var t=e.favoritesCount,r=void 0===t?0:t,n=e.favorited,o=void 0!==n&&n,a=e.slug,i=void 0===a?"":a,s=be(),l=f(d.exports.useState(r),2),c=l[0],u=l[1],p=f(d.exports.useState(o),2),h=p[0],m=p[1],g=d.exports.useCallback(function(){var e=b(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!h){e.next=10;break}return e.next=4,$({slug:i});case 4:if(e.t0=e.sent,!(e.t0>0)){e.next=8;break}u(c-1),m(!1);case 8:e.next=20;break;case 10:return e.next=12,G({slug:i});case 12:if(e.t1=e.sent,!(e.t1>0)){e.next=19;break}I.info("点赞成功"),u(c+1),m(!0),e.next=20;break;case 19:I.info("点赞失败");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h]);return S.createElement(B,{className:"f-r a-center",onClick:g,style:h?s.favouriteStyle:s.unFavouriteStyle},S.createElement(ve,{style:{fontSize:"14px",marginRight:"4px"}})," ",r)}var ye=W((function(e){return{icon1:{fontSize:"14px",marginRight:"4px"},action:{flex:1,boxSizing:"border-box",paddingLeft:"16px"},publishBtn:{backgroundColor:e.fc.active,height:"24px",lineHeight:"24px",padding:"0 16px",borderRadius:"12px",color:"#fff",fontSize:"12px"},mask:{height:window.innerHeight+"px",width:"100vw",position:"fixed",top:0,bottom:0,backgroundColor:"rgba(0,0,0,0.15)"},commentBar:{position:"absolute",boxSizing:"border-box",bottom:0,left:0,width:"100vw",padding:"8px 12px",backgroundColor:e.bg.pri}}}));function we(e){var t=e.data,r=e.updateComments,n=e.commentCount,o=f(d.exports.useState(!1),2),a=o[0],i=o[1],s=ye();return S.createElement("div",{className:"f-r a-center article-underbar"},S.createElement(B,{className:"fake-input",onClick:function(){return i(!0)}},"说点什么吧"),S.createElement("div",{className:"f-r j-around a-center",style:s.action},S.createElement("div",{className:"f-r"},S.createElement(pe,{style:s.icon1}),n),S.createElement(xe,p({},t)),S.createElement("div",null,S.createElement(de,{style:s.icon1,onClick:Ce})),a?S.createElement(Se,p({updateComments:r,onMaskClose:function(){return i(!1)}},t)):null))}function Ce(){I.info("得要微信号分享,我再想想咋整")}function Se(e){var t=e.onMaskClose,r=e.slug,n=e.updateComments,o=ye(),a=f(d.exports.useState(""),2),i=a[0],s=a[1];function l(){return(l=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ne({slug:r,body:i});case 4:e.sent>0?(I.success("发表成功"),n(),t()):I.fail("发表失败");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return E.exports.useUnactivate((function(){t()})),R.createPortal(S.createElement("div",{style:o.mask,onClick:t},S.createElement("div",{style:o.commentBar,onClick:function(e){return e.stopPropagation()}},S.createElement(ge,{value:i,onChange:s,rows:3}),S.createElement("div",{className:"f-r j-end",style:{marginTop:"8px"}},S.createElement("div",{style:o.publishBtn,onClick:function(){return l.apply(this,arguments)}},"发表")))),document.body)}var Ee=0;function Re(t){var r=t.src,n=u(t,e),o=f(d.exports.useState(!1),2),a=o[0],i=o[1],s=d.exports.useRef(null),l=d.exports.useRef(-1),c=d.exports.useCallback((function(){var e,t;l.current===(null===(e=s.current)||void 0===e||null===(t=e.dataset)||void 0===t?void 0:t.errtoken)&&i(!1)}),[l.current]);return d.exports.useEffect((function(){var e=Ee++;s.current&&(s.current.dataset.errtoken=e),l.current=e,i(!0)}),[r]),S.createElement("img",p({ref:s,src:a?j:r,onError:c},n))}var ke=W((function(e){return{root:{marginTop:"16px"},jiange:{height:"8px",width:"100vw",margin:"0 -16px",backgroundColor:e.bg.sec},divider:{width:"100vw",margin:"0 -16px"},header:{height:"36px",lineHeight:"36px",backgroundColor:"rgba(0,0,0,0.07)",width:window.innerWidth-32+"px",margin:"0 -16px",padding:"0 16px",fontWeight:600,color:e.fc.header},rowItem:{padding:"16px 0",position:"relative"},avatar:{marginRight:"8px"},uname:{color:e.fc.header,fontSize:"14px",fontWeight:800},body:{fontSize:"12px",marginTop:"8px",color:e.fc.text},empty:{padding:"16px 0",color:e.fc.text},delBtn:{color:e.fc.active,position:"absolute",right:"8px",top:"16px"}}}));var _e=k((function(e){return{uinfo:e.app.uinfo}}))((function(e){var t=e.comments,r=e.uinfo,n=e.slug,o=e.updateComments,a=ke();return S.createElement("div",{style:a.root},S.createElement("div",{style:a.jiange}),S.createElement("div",{style:a.header},"评论(",t.length,")"),t.length>0?S.createElement("div",null,t.map((function(e){return S.createElement(S.Fragment,{key:e.id},S.createElement(Te,{data:e,username:r.username,slug:n,updateComments:o}),S.createElement("div",{className:"divider",style:a.divider}))}))):S.createElement(Pe,null))}));function Te(e){var t,r,n,o=e.data,a=e.username,i=e.slug,s=e.updateComments;console.log(a);var l=ke(),c=_();return S.createElement("div",{className:"f-r",style:l.rowItem},S.createElement("div",{style:l.avatar},S.createElement(Re,{src:null==o||null===(t=o.author)||void 0===t?void 0:t.image,className:"user-img",alt:"",onClick:function(e){var t;e.stopPropagation(),c.push("/profile/".concat(null==o||null===(t=o.author)||void 0===t?void 0:t.username))}})),S.createElement("div",null,S.createElement("div",{style:l.uname,onClick:function(e){var t;e.stopPropagation(),c.push("/profile/".concat(null==o||null===(t=o.author)||void 0===t?void 0:t.username))}},null==o||null===(r=o.author)||void 0===r?void 0:r.username),S.createElement("div",{style:l.body},o.body)),a===(null==o||null===(n=o.author)||void 0===n?void 0:n.username)?S.createElement("div",{style:l.delBtn,onClick:function(){var e;M.alert("提示","你要删除评论吗?",[{text:"算了",onPress:function(){return console.log("cancel")},style:"default"},{text:"删除",onPress:(e=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae({slug:i,id:o.id});case 2:e.sent<0?I.fail("删除失败"):(I.success("删除成功"),s());case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}])}},"删除"):S.createElement("div",{style:l.delBtn},"关注"))}function Pe(){var e=ke();return S.createElement("div",{style:e.empty},"内容为空")}var ze=W((function(e){return{root:{height:window.innerHeight+"px",backgroundColor:e.bg.pri,overflowY:"scroll"},userImg:{display:"inline-block",marginRight:"14px"},article:{padding:"0 16px",paddingBottom:"56px"},articleContent:{marginTop:"24px"},guanzhu:{color:e.fc.header}}}));var Le=function(e,t,r,n,o,a,i,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,o,a,i,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}},Ne=Le;var Oe=function(e){if(Array.isArray(e))return 0===e.length;if("object"===c(e)){if(e)for(var t in!function(e){if("undefined"==typeof Symbol)return!1;return e[Symbol.iterator]}(e)||void 0===e.size||Ne(!1),e)return!1;return!0}return!e},De=function(){};function He(e,t,r){return e[t][r]}function Ie(e,t){return e[t]}var Be=function(){function e(t){g(this,e),Le(t&&"function"==typeof t.rowHasChanged,"Must provide a rowHasChanged function."),this._rowHasChanged=t.rowHasChanged,this._getRowData=t.getRowData||He,this._sectionHeaderHasChanged=t.sectionHeaderHasChanged,this._getSectionHeaderData=t.getSectionHeaderData||Ie,this._dataBlob=null,this._dirtyRows=[],this._dirtySections=[],this._cachedRowCount=0,this.rowIdentities=[],this.sectionIdentities=[]}return x(e,[{key:"cloneWithRows",value:function(e,t){var r=t?[t]:null;return this._sectionHeaderHasChanged||(this._sectionHeaderHasChanged=function(){return!1}),this.cloneWithRowsAndSections({s1:e},["s1"],r)}},{key:"cloneWithRowsAndSections",value:function(t,r,n){Le("function"==typeof this._sectionHeaderHasChanged,"Must provide a sectionHeaderHasChanged function with section data."),Le(!r||!n||r.length===n.length,"row and section ids lengths must be the same");var o=new e({getRowData:this._getRowData,getSectionHeaderData:this._getSectionHeaderData,rowHasChanged:this._rowHasChanged,sectionHeaderHasChanged:this._sectionHeaderHasChanged});return o._dataBlob=t,o.sectionIdentities=r||Object.keys(t),n?o.rowIdentities=n:(o.rowIdentities=[],o.sectionIdentities.forEach((function(e){o.rowIdentities.push(Object.keys(t[e]))}))),o._cachedRowCount=function(e){for(var t=0,r=0;r<e.length;r++){t+=e[r].length}return t}(o.rowIdentities),o._calculateDirtyArrays(this._dataBlob,this.sectionIdentities,this.rowIdentities),o}},{key:"getRowCount",value:function(){return this._cachedRowCount}},{key:"getRowAndSectionCount",value:function(){return this._cachedRowCount+this.sectionIdentities.length}},{key:"rowShouldUpdate",value:function(e,t){return this._dirtyRows[e][t]}},{key:"getRowData",value:function(e,t){var r=this.sectionIdentities[e],n=this.rowIdentities[e][t];return this._getRowData(this._dataBlob,r,n)}},{key:"getRowIDForFlatIndex",value:function(e){for(var t=e,r=0;r<this.sectionIdentities.length;r++){if(!(t>=this.rowIdentities[r].length))return this.rowIdentities[r][t];t-=this.rowIdentities[r].length}return null}},{key:"getSectionIDForFlatIndex",value:function(e){for(var t=e,r=0;r<this.sectionIdentities.length;r++){if(!(t>=this.rowIdentities[r].length))return this.sectionIdentities[r];t-=this.rowIdentities[r].length}return null}},{key:"getSectionLengths",value:function(){for(var e=[],t=0;t<this.sectionIdentities.length;t++)e.push(this.rowIdentities[t].length);return e}},{key:"sectionHeaderShouldUpdate",value:function(e){return this._dirtySections[e]}},{key:"getSectionHeaderData",value:function(e){if(!this._getSectionHeaderData)return null;var t=this.sectionIdentities[e];return this._getSectionHeaderData(this._dataBlob,t)}},{key:"_calculateDirtyArrays",value:function(e,t,r){for(var n,o=je(t),a={},i=0;i<r.length;i++){var s=t[i];De(!a[s]),a[s]=je(r[i])}this._dirtySections=[],this._dirtyRows=[];for(var l=0;l<this.sectionIdentities.length;l++){n=!o[s=this.sectionIdentities[l]];var c=this._sectionHeaderHasChanged;!n&&c&&(n=c(this._getSectionHeaderData(e,s),this._getSectionHeaderData(this._dataBlob,s))),this._dirtySections.push(!!n),this._dirtyRows[l]=[];for(var u=0;u<this.rowIdentities[l].length;u++){var d=this.rowIdentities[l][u];n=!o[s]||!a[s][d]||this._rowHasChanged(this._getRowData(e,s,d),this._getRowData(this._dataBlob,s,d)),this._dirtyRows[l].push(!!n)}}}}]),e}();function je(e){if(Oe(e))return{};for(var t={},r=0;r<e.length;r++){var n=e[r];De(!t[n]),t[n]=!0}return t}var Me={className:T.string,prefixCls:T.string,listPrefixCls:T.string,listViewPrefixCls:T.string,style:T.object,contentContainerStyle:T.object,onScroll:T.func},Fe=function(e){function t(){var e,r,n;g(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=n=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Ve.call(n),v(n,r)}return m(t,e),x(t,[{key:"componentWillUpdate",value:function(e){this.props.dataSource===e.dataSource&&this.props.initialListSize===e.initialListSize||!this.handleScroll||(this.props.useBodyScroll?window.removeEventListener("scroll",this.handleScroll):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.dataSource===e.dataSource&&this.props.initialListSize===e.initialListSize||!this.handleScroll||setTimeout((function(){t.props.useBodyScroll?window.addEventListener("scroll",t.handleScroll):t.ScrollViewRef.addEventListener("scroll",t.handleScroll)}),0)}},{key:"componentDidMount",value:function(){var e,t,r,n,o=this,a=function(e){return o.props.onScroll&&o.props.onScroll(e,o.getMetrics())};this.props.scrollEventThrottle&&(e=a,t=this.props.scrollEventThrottle,r=!0,n=!0,a=function(o){r&&(r=!1,setTimeout((function(){r=!0,e(o)}),t),n&&(e(o),n=!1))}),this.handleScroll=a,this.onLayout=function(){return o.props.onLayout({nativeEvent:{layout:{width:window.innerWidth,height:window.innerHeight}}})},this.props.useBodyScroll?(window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.onLayout)):this.ScrollViewRef.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.props.useBodyScroll?(window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.onLayout)):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.className,o=t.prefixCls,a=t.listPrefixCls,i=t.listViewPrefixCls,s=t.style,l=void 0===s?{}:s,c=t.contentContainerStyle,u=void 0===c?{}:c,d=t.useBodyScroll,p=t.pullToRefresh,h=o||i||"",f={ref:function(t){return e.ScrollViewRef=t||e.ScrollViewRef},style:C({},d?{}:{position:"relative",overflow:"auto",WebkitOverflowScrolling:"touch"},l),className:y(n,h+"-scrollview")},m={ref:function(t){return e.InnerScrollViewRef=t},style:C({position:"absolute",minWidth:"100%"},u),className:y(h+"-scrollview-content",a)},g=function(t){return S.cloneElement(p,{getScrollContainer:t?function(){return document.body}:function(){return e.ScrollViewRef}},r)};return d?p?S.createElement("div",f,g(!0)):S.createElement("div",f,r):p?S.createElement("div",f,S.createElement("div",m,g())):S.createElement("div",f,S.createElement("div",m,r))}}]),t}(S.Component);Fe.propTypes=Me;var Ve=function(){var e=this;this.getMetrics=function(){var t=!e.props.horizontal;if(e.props.useBodyScroll){var r=document.scrollingElement?document.scrollingElement:document.body;return{visibleLength:window[t?"innerHeight":"innerWidth"],contentLength:e.ScrollViewRef?e.ScrollViewRef[t?"scrollHeight":"scrollWidth"]:0,offset:r[t?"scrollTop":"scrollLeft"]}}return{visibleLength:e.ScrollViewRef[t?"offsetHeight":"offsetWidth"],contentLength:e.ScrollViewRef[t?"scrollHeight":"scrollWidth"],offset:e.ScrollViewRef[t?"scrollTop":"scrollLeft"]}},this.getInnerViewNode=function(){return e.InnerScrollViewRef},this.scrollTo=function(){var t;e.props.useBodyScroll?(t=window).scrollTo.apply(t,arguments):(e.ScrollViewRef.scrollLeft=arguments.length<=0?void 0:arguments[0],e.ScrollViewRef.scrollTop=arguments.length<=1?void 0:arguments[1])}},Ae=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),x(t,[{key:"shouldComponentUpdate",value:function(e){return e.shouldUpdate}},{key:"render",value:function(){return this.props.render()}}]),t}(S.Component),qe=function(e){function t(){var e,r,n;g(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=n=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),We.call(n),v(n,r)}return m(t,e),x(t,[{key:"componentWillMount",value:function(){this.scrollProperties={visibleLength:null,contentLength:null,offset:0},this._childFrames=[],this._visibleRows={},this._prevRenderedRowsCount=0,this._sentEndForContentLength=null}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.dataSource===e.dataSource&&this.props.initialListSize===e.initialListSize||this.setState((function(r,n){return t._prevRenderedRowsCount=0,{curRenderedRowsCount:Math.min(Math.max(r.curRenderedRowsCount,e.initialListSize),e.dataSource.getRowCount())}}),(function(){return t._renderMoreRowsIfNeeded()}))}},{key:"render",value:function(){for(var e=this,t=this.props.dataSource,r=t.rowIdentities,n=[],o=0,a=0;a<r.length;a++){var i=t.sectionIdentities[a],s=r[a];if(0!==s.length){var l=void 0;if(this.props.renderSectionHeader){var c=o>=this._prevRenderedRowsCount&&t.sectionHeaderShouldUpdate(a);l=S.createElement(Ae,{key:"s_"+i,shouldUpdate:!!c,render:this.props.renderSectionHeader.bind(null,t.getSectionHeaderData(a),i)})}for(var u=[],d=0;d<s.length;d++){var p=s[d],h=i+"_"+p,f=o>=this._prevRenderedRowsCount&&t.rowShouldUpdate(a,d),m=S.createElement(Ae,{key:"r_"+h,shouldUpdate:!!f,render:this.props.renderRow.bind(null,t.getRowData(a,d),i,p,this.onRowHighlighted)});if(u.push(m),this.props.renderSeparator&&(d!==s.length-1||a===r.length-1)){var g=this.state.highlightedRow.sectionID===i&&(this.state.highlightedRow.rowID===p||this.state.highlightedRow.rowID===s[d+1]),v=this.props.renderSeparator(i,p,g);v&&u.push(v)}if(++o===this.state.curRenderedRowsCount)break}var b=S.cloneElement(this.props.renderSectionBodyWrapper(i),{className:this.props.sectionBodyClassName},u);if(this.props.renderSectionWrapper?n.push(S.cloneElement(this.props.renderSectionWrapper(i),{},l,b)):(n.push(l),n.push(b)),o>=this.state.curRenderedRowsCount)break}}var x=this.props,y=x.renderScrollComponent,w=V(x,["renderScrollComponent"]);return S.cloneElement(y(C({},w,{onScroll:this._onScroll})),{ref:function(t){return e.ListViewRef=t},onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout},this.props.renderHeader?this.props.renderHeader():null,S.cloneElement(w.renderBodyComponent(),{},n),this.props.renderFooter?this.props.renderFooter():null,w.children)}}]),t}(S.Component);qe.DataSource=Be,qe.propTypes=C({},Fe.propTypes,{dataSource:T.instanceOf(Be).isRequired,renderSeparator:T.func,renderRow:T.func.isRequired,initialListSize:T.number,onEndReached:T.func,onEndReachedThreshold:T.number,pageSize:T.number,renderFooter:T.func,renderHeader:T.func,renderSectionHeader:T.func,renderScrollComponent:T.func,scrollRenderAheadDistance:T.number,onChangeVisibleRows:T.func,scrollEventThrottle:T.number,renderBodyComponent:T.func,renderSectionWrapper:T.func,renderSectionBodyWrapper:T.func,sectionBodyClassName:T.string,listViewPrefixCls:T.string,useBodyScroll:T.bool}),qe.defaultProps={initialListSize:10,pageSize:1,renderScrollComponent:function(e){return S.createElement(Fe,e)},renderBodyComponent:function(){return S.createElement("div",null)},renderSectionBodyWrapper:function(e){return S.createElement("div",{key:e})},sectionBodyClassName:"list-view-section-body",listViewPrefixCls:"rmc-list-view",scrollRenderAheadDistance:1e3,onEndReachedThreshold:1e3,scrollEventThrottle:50,scrollerOptions:{}};var We=function(){var e=this;this.state={curRenderedRowsCount:this.props.initialListSize,highlightedRow:{}},this.getMetrics=function(){return{contentLength:e.scrollProperties.contentLength,totalRows:e.props.dataSource.getRowCount(),renderedRows:e.state.curRenderedRowsCount,visibleRows:Object.keys(e._visibleRows).length}},this.getInnerViewNode=function(){return e.ListViewRef.getInnerViewNode()},this.scrollTo=function(){var t;e.ListViewRef&&e.ListViewRef.scrollTo&&(t=e.ListViewRef).scrollTo.apply(t,arguments)},this.onRowHighlighted=function(t,r){e.setState({highlightedRow:{sectionID:t,rowID:r}})},this._onContentSizeChange=function(t,r){var n=e.props.horizontal?t:r;n!==e.scrollProperties.contentLength&&(e.scrollProperties.contentLength=n,e._renderMoreRowsIfNeeded()),e.props.onContentSizeChange&&e.props.onContentSizeChange(t,r)},this._onLayout=function(t){var r=t.nativeEvent.layout,n=r.width,o=r.height,a=e.props.horizontal?n:o;a!==e.scrollProperties.visibleLength&&(e.scrollProperties.visibleLength=a,e._renderMoreRowsIfNeeded()),e.props.onLayout&&e.props.onLayout(t)},this._maybeCallOnEndReached=function(t){return!!(e.props.onEndReached&&e.scrollProperties.contentLength!==e._sentEndForContentLength&&e._getDistanceFromEnd(e.scrollProperties)<e.props.onEndReachedThreshold&&e.state.curRenderedRowsCount===e.props.dataSource.getRowCount())&&(e._sentEndForContentLength=e.scrollProperties.contentLength,e.props.onEndReached(t),!0)},this._renderMoreRowsIfNeeded=function(){null!==e.scrollProperties.contentLength&&null!==e.scrollProperties.visibleLength&&e.state.curRenderedRowsCount!==e.props.dataSource.getRowCount()?e._getDistanceFromEnd(e.scrollProperties)<e.props.scrollRenderAheadDistance&&e._pageInNewRows():e._maybeCallOnEndReached()},this._pageInNewRows=function(){e.setState((function(t,r){var n=Math.min(t.curRenderedRowsCount+r.pageSize,r.dataSource.getRowCount());return e._prevRenderedRowsCount=t.curRenderedRowsCount,{curRenderedRowsCount:n}}),(function(){e._prevRenderedRowsCount=e.state.curRenderedRowsCount}))},this._getDistanceFromEnd=function(e){return e.contentLength-e.visibleLength-e.offset},this._onScroll=function(t,r){e.ListViewRef&&(e.scrollProperties=r,e._maybeCallOnEndReached(t)||e._renderMoreRowsIfNeeded(),e.props.onEndReached&&e._getDistanceFromEnd(e.scrollProperties)>e.props.onEndReachedThreshold&&(e._sentEndForContentLength=null),e.props.onScroll&&e.props.onScroll(t))}};function Ye(e){window.document.body.scrollTop=e,window.document.documentElement.scrollTop=e}var Ue=function(e){function t(e){g(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Qe.call(r),r.state={pageSize:e.pageSize,_delay:!1},r}return m(t,e),x(t,[{key:"componentDidMount",value:function(){this.dataChange(this.props),this.getQsInfo()}},{key:"componentWillReceiveProps",value:function(e){this.props.dataSource!==e.dataSource&&this.dataChange(e)}},{key:"componentDidUpdate",value:function(){this.getQsInfo()}},{key:"componentWillUnmount",value:function(){this._timer&&clearTimeout(this._timer),this._hCache=null}},{key:"renderQuickSearchBar",value:function(e,t){var r=this,n=this.props,o=n.dataSource,a=n.prefixCls,i=o.sectionIdentities.map((function(e){return{value:e,label:o._getSectionHeaderData(o._dataBlob,e)}}));return S.createElement("ul",{ref:function(e){return r.quickSearchBarRef=e},className:a+"-quick-search-bar",style:t,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchEnd},S.createElement("li",{"data-qf-target":e.value,onClick:function(){return r.onQuickSearchTop(void 0,e.value)}},e.label),i.map((function(e){return S.createElement("li",{key:e.value,"data-qf-target":e.value,onClick:function(){return r.onQuickSearch(e.value)}},e.label)})))}},{key:"render",value:function(){var e,t=this,r=this.state,n=r._delay,o=r.pageSize,a=this.props,i=a.className,s=a.prefixCls,l=a.children,c=a.quickSearchBarTop,u=a.quickSearchBarStyle,d=a.initialListSize,p=void 0===d?Math.min(20,this.props.dataSource.getRowCount()):d,h=a.showQuickSearchIndicator,f=a.renderSectionHeader,m=a.sectionHeaderClassName,g=V(a,["className","prefixCls","children","quickSearchBarTop","quickSearchBarStyle","initialListSize","showQuickSearchIndicator","renderSectionHeader","sectionHeaderClassName"]);return S.createElement("div",{className:s+"-container"},n&&this.props.delayActivityIndicator,S.createElement(qe,C({},g,{ref:function(e){return t.indexedListViewRef=e},className:y(s,i),initialListSize:p,pageSize:o,renderSectionHeader:function(e,r){return S.cloneElement(f(e,r),{ref:function(e){return t.sectionComponents[r]=e},className:m||s+"-section-header"})}}),l),this.renderQuickSearchBar(c,u),h?S.createElement("div",{className:y((e={},w(e,s+"-qsindicator",!0),w(e,s+"-qsindicator-hide",!h||!this.state.showQuickSearchIndicator),e)),ref:function(e){return t.qsIndicatorRef=e}}):null)}}]),t}(S.Component);Ue.propTypes=C({},qe.propTypes,{children:T.any,prefixCls:T.string,className:T.string,sectionHeaderClassName:T.string,quickSearchBarTop:T.object,quickSearchBarStyle:T.object,onQuickSearch:T.func,showQuickSearchIndicator:T.bool}),Ue.defaultProps={prefixCls:"rmc-indexed-list",quickSearchBarTop:{value:"#",label:"#"},onQuickSearch:function(){},showQuickSearchIndicator:!1,delayTime:100,delayActivityIndicator:""};var Qe=function(){var e=this;this.onQuickSearchTop=function(t,r){e.props.useBodyScroll?Ye(0):R.findDOMNode(e.indexedListViewRef.ListViewRef).scrollTop=0,e.props.onQuickSearch(t,r)},this.onQuickSearch=function(t){var r=R.findDOMNode(e.indexedListViewRef.ListViewRef),n=R.findDOMNode(e.sectionComponents[t]);e.props.useBodyScroll?Ye(n.getBoundingClientRect().top-r.getBoundingClientRect().top+function(e){var t=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop)}while(e=e.offsetParent);return t}(r)):r.scrollTop+=n.getBoundingClientRect().top-r.getBoundingClientRect().top,e.props.onQuickSearch(t)},this.onTouchStart=function(t){e._target=t.target,e._basePos=e.quickSearchBarRef.getBoundingClientRect(),document.addEventListener("touchmove",e._disableParent,!1),document.body.className=document.body.className+" "+e.props.prefixCls+"-qsb-moving",e.updateIndicator(e._target)},this.onTouchMove=function(t){if(t.preventDefault(),e._target){var r=function(e){return e.touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),n=e._basePos,o=void 0;if(r.clientY>=n.top&&r.clientY<=n.top+e._qsHeight){var a=void 0;if((o=Math.floor((r.clientY-n.top)/e._avgH))in e._hCache&&(a=e._hCache[o][0]),a){var i=a.getAttribute("data-qf-target");e._target!==a&&(e.props.quickSearchBarTop.value===i?e.onQuickSearchTop(void 0,i):e.onQuickSearch(i),e.updateIndicator(a)),e._target=a}}}},this.onTouchEnd=function(){e._target&&(document.removeEventListener("touchmove",e._disableParent,!1),document.body.className=document.body.className.replace(new RegExp("\\s*"+e.props.prefixCls+"-qsb-moving","g"),""),e.updateIndicator(e._target,!0),e._target=null)},this.getQsInfo=function(){var t=e.quickSearchBarRef,r=t.offsetHeight,n=[];[].slice.call(t.querySelectorAll("[data-qf-target]")).forEach((function(e){n.push([e])}));for(var o=r/n.length,a=0,i=0,s=n.length;i<s;i++)a=i*o,n[i][1]=[a,a+o];e._qsHeight=r,e._avgH=o,e._hCache=n},this.sectionComponents={},this.dataChange=function(t){var r=t.dataSource.getRowCount();r&&(e.setState({_delay:!0}),e._timer&&clearTimeout(e._timer),e._timer=setTimeout((function(){e.setState({pageSize:r,_delay:!1},(function(){return e.indexedListViewRef._pageInNewRows()}))}),t.delayTime))},this.updateIndicator=function(t,r){var n=t;n.getAttribute("data-qf-target")||(n=n.parentNode),e.props.showQuickSearchIndicator&&(e.qsIndicatorRef.innerText=n.innerText.trim(),e.setState({showQuickSearchIndicator:!0}),e._indicatorTimer&&clearTimeout(e._indicatorTimer),e._indicatorTimer=setTimeout((function(){e.setState({showQuickSearchIndicator:!1})}),1e3));var o=e.props.prefixCls+"-quick-search-bar-over";e._hCache.forEach((function(e){e[0].className=e[0].className.replace(o,"")})),r||(n.className=n.className+" "+o)},this._disableParent=function(e){e.preventDefault(),e.stopPropagation()}};qe.IndexedList=Ue;var Xe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r},Ze=A.Item;function Ke(e,t){var r=e.renderHeader,n=e.renderFooter,o=e.renderSectionHeader,a=e.renderBodyComponent,i=Xe(e,["renderHeader","renderFooter","renderSectionHeader","renderBodyComponent"]),s=e.listPrefixCls,l={renderHeader:null,renderFooter:null,renderSectionHeader:null,renderBodyComponent:a||function(){return d.exports.createElement("div",{className:s+"-body"})}};return r&&(l.renderHeader=function(){return d.exports.createElement("div",{className:s+"-header"},r())}),n&&(l.renderFooter=function(){return d.exports.createElement("div",{className:s+"-footer"},n())}),o&&(l.renderSectionHeader=t?function(e,t){return d.exports.createElement("div",null,d.exports.createElement(Ze,{prefixCls:s},o(e,t)))}:function(e,t){return d.exports.createElement(Ze,{prefixCls:s},o(e,t))}),{restProps:i,extraProps:l}}var Ge=qe.IndexedList,Je=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),x(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.prefixCls,n=t.listPrefixCls,o=Ke(this.props,!0),a=o.restProps,i=o.extraProps;return d.exports.createElement(Ge,C({ref:function(t){return e.indexedListRef=t},sectionHeaderClassName:r+"-section-header "+n+"-body",sectionBodyClassName:r+"-section-body "+n+"-body"},a,i),this.props.children)}}]),t}(d.exports.Component);Je.defaultProps={prefixCls:"am-indexed-list",listPrefixCls:"am-list",listViewPrefixCls:"am-list-view"};var $e=function(e){function t(){g(this,t);var e=v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.scrollTo=function(){var t;return(t=e.listviewRef).scrollTo.apply(t,arguments)},e.getInnerViewNode=function(){return e.listviewRef.getInnerViewNode()},e}return m(t,e),x(t,[{key:"render",value:function(){var e=this,t=Ke(this.props,!1),r=t.restProps,n=t.extraProps;return d.exports.createElement(qe,C({ref:function(t){return e.listviewRef=t}},r,n))}}]),t}(d.exports.Component);$e.defaultProps={prefixCls:"am-list-view",listPrefixCls:"am-list"},$e.DataSource=qe.DataSource,$e.IndexedList=Je;var et=Object.freeze((h(U={__proto__:null},Symbol.toStringTag,"Module"),h(U,"default",{activateText:"松开立即刷新",deactivateText:"下拉可以刷新",finishText:"完成刷新"}),U)),tt=P(et),rt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r},nt=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),x(t,[{key:"shouldComponentUpdate",value:function(e){return e.shouldUpdate}},{key:"render",value:function(){return S.createElement("div",null,this.props.render())}}]),t}(S.Component);function ot(e,t){e.transform=t,e.webkitTransform=t,e.MozTransform=t}var at="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),it="down",st="up",lt={activate:"release",deactivate:"pull",release:"loading",finish:"finish"},ct=!1;try{var ut=Object.defineProperty({},"passive",{get:function(){ct=!0}});window.addEventListener("test",null,ut)}catch(Rt){}var dt=!!ct&&{passive:!1},pt=function(e){function t(){g(this,t);var e=v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={currSt:"deactivate",dragOnEdge:!1},e._isMounted=!1,e.shouldUpdateChildren=!1,e.triggerPullToRefresh=function(){!e.state.dragOnEdge&&e._isMounted&&(e.props.refreshing?(e.props.direction===st&&(e._lastScreenY=-e.props.distanceToRefresh-1),e.props.direction===it&&(e._lastScreenY=e.props.distanceToRefresh+1),e.setState({currSt:"release"},(function(){return e.setContentStyle(e._lastScreenY)}))):e.setState({currSt:"finish"},(function(){return e.reset()})))},e.init=function(t){t&&(e._to={touchstart:e.onTouchStart.bind(e,t),touchmove:e.onTouchMove.bind(e,t),touchend:e.onTouchEnd.bind(e,t),touchcancel:e.onTouchEnd.bind(e,t)},Object.keys(e._to).forEach((function(r){t.addEventListener(r,e._to[r],dt)})))},e.destroy=function(t){e._to&&t&&Object.keys(e._to).forEach((function(r){t.removeEventListener(r,e._to[r])}))},e.onTouchStart=function(t,r){e._ScreenY=e._startScreenY=r.touches[0].screenY,e._startScreenX=r.touches[0].screenX,e._lastScreenY=e._lastScreenY||0},e.isEdge=function(t,r){var n=e.props.getScrollContainer();if(n&&n===document.body){var o=document.scrollingElement?document.scrollingElement:document.body;if(r===st)return o.scrollHeight-o.scrollTop<=window.innerHeight;if(r===it)return o.scrollTop<=0}return r===st?t.scrollHeight-t.scrollTop===t.clientHeight:r===it?t.scrollTop<=0:void 0},e.damping=function(t){return Math.abs(e._lastScreenY)>e.props.damping?0:t*=(1-Math.abs(e._ScreenY-e._startScreenY)/window.screen.height)*e.props.scale},e.onTouchMove=function(t,r){var n=r.touches[0].screenY,o=r.touches[0].screenX,a=e.props.direction;if(!(Math.abs(o-e._startScreenX)>20*window.devicePixelRatio)&&!(a===st&&e._startScreenY<n||a===it&&e._startScreenY>n)&&e.isEdge(t,a)){e.state.dragOnEdge||(e._ScreenY=e._startScreenY=r.touches[0].screenY,e.setState({dragOnEdge:!0})),r.preventDefault();var i=Math.round(n-e._ScreenY);e._ScreenY=n,e._lastScreenY+=e.damping(i),e.setContentStyle(e._lastScreenY),Math.abs(e._lastScreenY)<e.props.distanceToRefresh?"deactivate"!==e.state.currSt&&e.setState({currSt:"deactivate"}):"deactivate"===e.state.currSt&&e.setState({currSt:"activate"}),at&&r.changedTouches[0].clientY<0&&e.onTouchEnd()}},e.onTouchEnd=function(){e.state.dragOnEdge&&e.setState({dragOnEdge:!1}),"activate"===e.state.currSt?(e.setState({currSt:"release"}),e._timer=setTimeout((function(){e.props.refreshing||e.setState({currSt:"finish"},(function(){return e.reset()})),e._timer=void 0}),1e3),e.props.onRefresh()):e.reset()},e.reset=function(){e._lastScreenY=0,e.setContentStyle(0)},e.setContentStyle=function(t){e.contentRef&&ot(e.contentRef.style,"translate3d(0px,"+t+"px,0)")},e}return m(t,e),x(t,[{key:"shouldComponentUpdate",value:function(e){return this.shouldUpdateChildren=this.props.children!==e.children,!0}},{key:"componentDidUpdate",value:function(e){e!==this.props&&e.refreshing!==this.props.refreshing&&this.triggerPullToRefresh()}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.init(e.props.getScrollContainer()||e.containerRef),e.triggerPullToRefresh(),e._isMounted=!0}))}},{key:"componentWillUnmount",value:function(){this.destroy(this.props.getScrollContainer()||this.containerRef)}},{key:"render",value:function(){var e=this,t=C({},this.props);delete t.damping;var r=t.className,n=t.prefixCls,o=t.children,a=t.getScrollContainer,i=t.direction;t.onRefresh,t.refreshing;var s=t.indicator;t.distanceToRefresh;var l=rt(t,["className","prefixCls","children","getScrollContainer","direction","onRefresh","refreshing","indicator","distanceToRefresh"]),c=S.createElement(nt,{shouldUpdate:this.shouldUpdateChildren,render:function(){return o}}),u=function(t){var r=y(t,!e.state.dragOnEdge&&n+"-transition");return S.createElement("div",{className:n+"-content-wrapper"},S.createElement("div",{className:r,ref:function(t){return e.contentRef=t}},i===st?c:null,S.createElement("div",{className:n+"-indicator"},s[e.state.currSt]||lt[e.state.currSt]),i===it?c:null))};return a()?u(n+"-content "+n+"-"+i):S.createElement("div",C({ref:function(t){return e.containerRef=t},className:y(r,n,n+"-"+i)},l),u(n+"-content"))}}]),t}(S.Component);pt.defaultProps={prefixCls:"rmc-pull-to-refresh",getScrollContainer:function(){},direction:it,distanceToRefresh:25,damping:100,indicator:lt,scale:.6};var ht=function(e){function t(){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),x(t,[{key:"render",value:function(){var e=q(this.props,this.context,"PullToRefresh",(function(){return tt})),t=e.activateText,r=e.deactivateText,n=e.finishText,o=C({activate:t,deactivate:r,release:d.exports.createElement(z,{type:"loading"}),finish:n},this.props.indicator);return d.exports.createElement(pt,C({},this.props,{indicator:o}))}}]),t}(d.exports.Component);function ft(e){return S.createElement(ht,p({},e))}ht.defaultProps={prefixCls:"am-pull-to-refresh"},ht.contextTypes={antLocale:L.exports.object};var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(p,e);var i,l,c,u=a(p);function p(){var e;r(this,p);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return h(s(e=u.call.apply(u,[this].concat(o))),"state",{dataSource:new $e.DataSource({rowHasChanged:function(e,t){return e!==t}}),refreshing:!0,isLoading:!0,pagination:e.props.defaultPagination||{pageNum:0,pageSize:20,total:0},height:0}),h(s(e),"rData",[]),h(s(e),"calcRef",d.exports.createRef()),h(s(e),"onResize",(function(){var t=e.calcRef.current.getBoundingClientRect().top,r=window.innerHeight;e.setState({height:r-t-(e.props.offset?50:0)})})),h(s(e),"getData",b(regeneratorRuntime.mark((function r(){var n,o,a,i,s,l,c=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:e.state.pagination.pageNum+1,o=c.length>1&&void 0!==c[1]?c[1]:e.state.pagination.pageSize,a=e.props.getDataMethod,r.next=5,a({pageNum:n,pageSize:o});case 5:if(i=r.sent,s=i.list,l=i.total,console.log(s,"hahaha"),0!==n){r.next=13;break}return e.rData=t(s),e.setState({dataSource:new $e.DataSource({rowHasChanged:function(e,t){return e!==t}}).cloneWithRows(s),refreshing:!1,isLoading:!1,pagination:{total:l,pageNum:n,pageSize:o}}),r.abrupt("return");case 13:s.length>0?(e.rData=[].concat(t(e.rData),t(s)),e.setState({dataSource:e.state.dataSource.cloneWithRows(e.rData),refreshing:!1,isLoading:!1,pagination:{total:l,pageNum:n,pageSize:o}})):e.setState({refreshing:!1,isLoading:!1});case 14:case"end":return r.stop()}}),r)})))),h(s(e),"onRefresh",(function(){e.setState({refreshing:!0,isLoading:!0}),e.getData(0)})),h(s(e),"onEndReached",(function(){e.state.isLoading||e.rData.length>=e.state.pagination.total||(e.setState({isLoading:!0}),e.getData())})),e}return i=p,(l=[{key:"componentDidMount",value:function(){this.props.apiRef&&(this.props.apiRef.current={getData:this.getData}),this.getData(0),this.onResize(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){var e=this.state,t=e.dataSource,r=e.pagination,n=e.refreshing,o=e.isLoading,a=this.props,i=a.renderRow,s=a.contentContainerStyle,l=void 0===s?{}:s,c=a.renderSeparator,u=void 0===c?function(e,t){return S.createElement("div",{key:"".concat(e,"-").concat(t),className:"list-gap"})}:c;return S.createElement("div",{ref:this.calcRef,className:"pull-list"},S.createElement($e,{dataSource:t,contentContainerStyle:l,renderFooter:function(){return S.createElement("div",{className:"pull-list-footer"},o?"加载中...":"已经没有更多数据了")},renderRow:i,renderSeparator:u,useBodyScroll:!1,style:{height:this.state.height+"px"},pullToRefresh:S.createElement(ft,{refreshing:n,onRefresh:this.onRefresh}),onEndReached:this.onEndReached,pageSize:r.pageSize}))}}])&&n(i.prototype,l),c&&n(i,c),p}(d.exports.Component),gt=W((function(e){return{contentContainerStyle:{boxSizing:"border-box"},root:{backgroundColor:e.bg.pri,padding:"16px",borderBottom:"1px solid rgba(57, 60, 67, 0.08)"},userImg:{display:"inline-block",marginRight:"14px"},actionBar:{marginTop:"16px"},icon1:{fontSize:"14px",color:e.fc.desc,marginRight:"40px"},guanzhu:{color:e.fc.header}}}));function vt(e){var t=e.query,r=e.offset,n=gt(),o=d.exports.useRef(null),a=_();d.exports.useEffect((function(){o.current.getData(0)}),[t]);var i=d.exports.useCallback(function(){var e=b(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(p(p({},r),t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),s=d.exports.useCallback((function(e){if(!e.slug)return I.info("没有slug");a.push("/posts/".concat(e.slug))}),[]),l=d.exports.useMemo((function(){return function(e,t,r){var o,i;return S.createElement("div",{className:"article-row-item",style:n.root,onClick:function(){return s(e)}},S.createElement("div",{className:"f-r j-between a-center"},S.createElement("div",{className:"f-r a-center",onClick:function(t){var r;t.stopPropagation(),a.push("/profile/".concat(null==e||null===(r=e.author)||void 0===r?void 0:r.username))}},S.createElement(Re,{className:"user-img",src:null==e||null===(o=e.author)||void 0===o?void 0:o.image,style:n.userImg}),S.createElement("div",null,S.createElement("div",{className:"header"},(null==e||null===(i=e.author)||void 0===i?void 0:i.username)||"示例昵称"),S.createElement("div",{className:"secd"},e.updateAt||"1小时前"))),S.createElement("div",{style:n.guanzhu},"关注")),S.createElement("div",{className:"title"},e.title||"我是一个标题"),S.createElement("div",{className:"content hidecontent"},e.description||bt),S.createElement("div",{className:"f-r j-end",style:n.actionBar},S.createElement("div",{className:"f-r j-center a-center",onClick:function(e){return e.stopPropagation()}},S.createElement(pe,{style:n.icon1})),S.createElement(xe,p({},e))))}}),[n]),c=d.exports.useMemo((function(){return function(e,t){return S.createElement("div",{key:"".concat(e,"-").concat(t),className:"article-list-gap"})}}),[]);return S.createElement("div",null,S.createElement(mt,{apiRef:o,offset:r,getDataMethod:i,renderRow:l,renderSeparator:c,contentContainerStyle:n.contentContainerStyle}))}var bt="你知道吗，每刷新1次，你的页面就变成了新的，刷新2次，就会变2次",xt=W((function(e){return{tabBarTextStyle:{padding:0,height:"36px",lineHeight:"36px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",textAlign:"center",fontSize:"14px"}}}));function yt(e){var r=e.tags,n=e.onTabChange,o=xt(),a=d.exports.useMemo((function(){return[{title:"全部"}].concat(t(r.map((function(e){return{title:e}}))))}),[r]);return S.createElement(N,{tabs:a,tabBarTextStyle:o.tabBarTextStyle,initialPage:0,onChange:n})}var wt=l(d.exports.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})),Ct=W((function(e){return{root:{paddingTop:"36px"},tabBarTextStyle:{padding:0,height:"36px",lineHeight:"36px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",textAlign:"center",fontSize:"14px"}}}));function St(e){var t=e.username,r=e.type,n=void 0===r?"0":r,o=Ct(),a=f(d.exports.useState("0"===n?{author:t}:{favorited:t}),2),i=a[0],s=a[1],l=d.exports.useCallback((function(e){var r=e.title;"我的文章"===r?s({author:t}):"我喜欢的文章"===r&&s({favorited:t})}),[]);return S.createElement("div",null,S.createElement(N,{tabs:[{title:"我的文章"},{title:"我喜欢的文章"}],tabBarTextStyle:o.tabBarTextStyle,initialPage:Number(n),onChange:l}),S.createElement(vt,{query:i,offset:!0}))}var Et=W((function(e){return{header:{position:"relative",height:"20vh",backgroundImage:"url(".concat("./assets/maoboli.2da01a31.jpeg",")"),backgroundSize:"cover"},backBtn:{position:"absolute",fontSize:"18px",top:"16px",left:"16px",color:"#fff"},viteImg:{height:"50%",objectFit:"contain"},profileDiv:{padding:"16px",backgroundColor:e.bg.pri,position:"relative"},avatar:{boxSizing:"border-box",border:"3px solid ".concat(e.bg.pri),position:"absolute",top:"-32px",left:"16px"},editBtn:{fontSize:"12px",color:"#56ba68",height:"24px",lineHeight:"24px",padding:"0 8px",borderRadius:"12px",border:"1px solid #56ba68"},username:{fontSize:"18px",color:e.fc.header,marginBottom:"6px"},bio:{fontSize:"14px",color:e.fc.text}}}))}}}))}();
