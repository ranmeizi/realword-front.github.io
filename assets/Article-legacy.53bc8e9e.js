!function(){var e=["src"];function t(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){v(i,n,o,a,s,"next",e)}function s(e){v(i,n,o,a,s,"throw",e)}a(void 0)}))}}var b=document.createElement("style");b.innerHTML=".am-indexed-list-section-body.am-list-body,.am-indexed-list-section-body.am-list-body .am-list-item:last-child .am-list-line{border-bottom:0}.am-indexed-list-section-body.am-list-body:after,.am-indexed-list-section-body.am-list-body .am-list-item:last-child .am-list-line:after{display:none!important}.am-indexed-list-section-header.am-list-body,.am-indexed-list-section-header.am-list-body .am-list-item .am-list-line{border-bottom:0}.am-indexed-list-section-header.am-list-body:after,.am-indexed-list-section-header.am-list-body .am-list-item .am-list-line:after{display:none!important}.am-indexed-list-section-header .am-list-item{height:30px;min-height:30px;background-color:#f5f5f9}.am-indexed-list-section-header .am-list-item .am-list-line{height:30px;min-height:30px}.am-indexed-list-section-header .am-list-item .am-list-content{font-size:14px!important;color:#888!important}.am-indexed-list-quick-search-bar{position:fixed;top:0;right:0;z-index:0;text-align:center;color:#108ee9;font-size:16px;list-style:none;padding:0}.am-indexed-list-quick-search-bar li{padding:0 5px}.am-indexed-list-quick-search-bar-over{background-color:#0006}.am-indexed-list-qsindicator{position:absolute;left:50%;top:50%;margin:-15px auto auto -30px;width:60px;height:30px;background:transparent;opacity:.7;color:#0af;font-size:20px;border-radius:30px;z-index:1999;text-align:center;line-height:30px}.am-indexed-list-qsindicator-hide{display:none}.pull-list .am-list-body{background-color:transparent}.pull-list .pull-list-footer{padding:12px;text-align:center}.am-pull-to-refresh-content{transform-origin:left top 0}.am-pull-to-refresh-content-wrapper{overflow:hidden}.am-pull-to-refresh-transition{transition:transform .3s}.am-pull-to-refresh-indicator{color:gray;text-align:center;height:25px}.am-pull-to-refresh-down .am-pull-to-refresh-indicator{margin-top:-25px}.am-pull-to-refresh-up .am-pull-to-refresh-indicator{margin-bottom:-25px}.rvt-body-light .article-row-item .header,.rvt-body-light .article-detail .header{font-size:14px;color:#565656}.rvt-body-light .article-row-item .secd,.rvt-body-light .article-detail .secd{font-size:12px;font-weight:400;color:#565656}.rvt-body-light .article-row-item .title,.rvt-body-light .article-detail .title{margin:16px 0;font-size:16px;color:#2f2f2f;font-weight:600}.rvt-body-light .article-row-item .content,.rvt-body-light .article-detail .content{font-size:14px;color:#565656}.rvt-body-light .article-row-item .hidecontent,.rvt-body-light .article-detail .hidecontent{word-break:break-all;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.rvt-body-light .article-list-gap{height:15px}.rvt-body-light .article-underbar{box-sizing:border-box;color:#9c9c9c;font-size:14px;width:100vw;height:40px;position:fixed;bottom:0;left:0;padding:16px;box-shadow:0 0 5px 2px #f5f5f5;background-color:#fff}.rvt-body-light .article-underbar .fake-input{box-sizing:border-box;font-size:12px;width:66%;height:28px;line-height:28px;border-radius:14px;padding:0 16px;background-color:#f5f5f5;border:none}.rvt-body-dark .article-row-item .header,.rvt-body-dark .article-detail .header{font-size:14px;color:#b1b1b1}.rvt-body-dark .article-row-item .secd,.rvt-body-dark .article-detail .secd{font-size:12px;font-weight:400;color:#b1b1b1}.rvt-body-dark .article-row-item .title,.rvt-body-dark .article-detail .title{margin:16px 0;font-size:16px;color:#aeaeae;font-weight:600}.rvt-body-dark .article-row-item .content,.rvt-body-dark .article-detail .content{font-size:14px;color:#b1b1b1}.rvt-body-dark .article-row-item .hidecontent,.rvt-body-dark .article-detail .hidecontent{word-break:break-all;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.rvt-body-dark .article-list-gap{height:15px}.rvt-body-dark .article-underbar{box-sizing:border-box;color:#868686;font-size:14px;width:100vw;height:40px;position:fixed;bottom:0;left:0;padding:16px;box-shadow:0 0 5px 2px #363636;background-color:#3f3f3f}.rvt-body-dark .article-underbar .fake-input{box-sizing:border-box;font-size:12px;width:66%;height:28px;line-height:28px;border-radius:14px;padding:0 16px;background-color:#363636;border:none}\n",document.head.appendChild(b),System.register(["./vendor-legacy.c5e93638.js","./propTypes-legacy.405019e0.js","./index-legacy.ba9ad74b.js"],(function(a){"use strict";var c,d,m,g,v,b,x,w,S,R,E,C,k,_,T,z,P,L,I,N,O,H,B,D,j,M,V,q,A,W,F,Y,U;return{setters:[function(e){c=e.o,d=e.c,m=e.R,g=e.r,v=e.a,b=e.q,x=e.u,w=e.s,S=e.x,R=e.y,E=e.z,C=e.D,k=e.E,_=e.F,T=e.G,z=e.H,P=e.I,L=e.J,I=e.K},function(e){N=e.i,O=e._,H=e.C,B=e.T,D=e.d,j=e.M,M=e.R,V=e.a,q=e.L,A=e.g,W=e.c,F=e.I},function(e){Y=e.m,U=e.s}],execute:function(){var Q;function X(e){return K.apply(this,arguments)}function K(){return(K=y(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tag,n=t.author,o=t.favorited,i=t.pageSize,a=void 0===i?20:i,s=t.pageNum,c=void 0===s?0:s,e.prev=1,e.next=4,N.get("/articles",{params:{tag:r,author:n,favorited:o,limit:a,offset:c},loading:!0});case 4:return l=e.sent,e.abrupt("return",{list:l.data.articles,total:l.data.articlesCount});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{list:[],total:0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function G(e){return J.apply(this,arguments)}function J(){return(J=y(regeneratorRuntime.mark((function e(t){var r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,n=t.body,o=t.tagList,i=t.description,e.prev=1,e.next=4,N.post("/articles",{article:{title:r,body:n,tagList:o,description:i}},{loading:!0});case 4:if(200===(a=e.sent).status){e.next=7;break}throw new Error("失败");case 7:return e.abrupt("return",a.data.article.slug);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return","");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Z(e){return $.apply(this,arguments)}function $(){return($=y(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.prev=1,e.next=4,N.get("/articles/".concat(r),{loading:!0});case 4:return n=e.sent,e.abrupt("return",n.data.article||{});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=y(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.prev=1,e.next=4,N.post("/articles/".concat(r,"/favorite"),{},{loading:!0});case 4:if(200===e.sent.status){e.next=7;break}throw new Error("点赞失败");case 7:return e.abrupt("return",1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",-1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=y(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.prev=1,e.next=4,N.delete("/articles/".concat(r,"/favorite"),{loading:!0});case 4:if(200===e.sent.status){e.next=7;break}throw new Error("点赞失败");case 7:return e.abrupt("return",1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",-1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=y(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,e.prev=1,e.next=4,N.get("/articles/".concat(r,"/comments"));case 4:return n=e.sent,e.abrupt("return",n.data.comments||[]);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ae(e){return se.apply(this,arguments)}function se(){return(se=y(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,n=t.body,e.prev=1,e.next=4,N.post("/articles/".concat(r,"/comments"),{comment:{body:n}},{loading:!0});case 4:if(200===e.sent.status){e.next=7;break}throw new Error("失败");case 7:return e.abrupt("return",1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",-1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function ce(e){return le.apply(this,arguments)}function le(){return(le=y(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,n=t.id,e.prev=1,e.next=4,N.delete("/articles/".concat(r,"/comments/").concat(n),{loading:!0});case 4:if(!((o=e.sent).status<200||o.status>300)){e.next=7;break}throw new Error("失败");case 7:return e.abrupt("return",1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",-1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function ue(){return de.apply(this,arguments)}function de(){return(de=y(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.get("/tags");case 3:return t=e.sent,e.abrupt("return",t.data.tags);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=y(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,e.prev=1,e.next=4,N.get("/profiles/".concat(r));case 4:return n=e.sent,e.abrupt("return",n.data.profile);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function he(e){return me.apply(this,arguments)}function me(){return(me=y(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,e.prev=1,e.next=4,N.post("/profiles/".concat(r,"/follow"),{},{loading:!0});case 4:return n=e.sent,e.abrupt("return",n.data.profile);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ge(e){return ve.apply(this,arguments)}function ve(){return(ve=y(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,e.prev=1,e.next=4,N.delete("/profiles/".concat(r,"/follow"),{loading:!0});case 4:return n=e.sent,e.abrupt("return",n.data.profile);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}a({MyArticles:function(e){var t=kt();return m.createElement("div",{style:t.root},m.createElement(M,{title:"我的文章"}),m.createElement(_t,{username:U.getState().app.uinfo.username,type:e.match.params.type}))},Posts:function(e){var t,r,n,o,i=Ne(),a=x(),s=h(d.exports.useState({}),2),c=s[0],l=s[1],u=h(d.exports.useState([]),2),p=u[0],f=u[1],g=d.exports.useRef(null),v=d.exports.useRef(null),b=d.exports.useMemo((function(){return p.length}),[p]);d.exports.useEffect((function(){S(),R()}),[]);var w=d.exports.useMemo((function(){return Object.keys(c).length>0}),[c]),S=d.exports.useCallback(y(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null==e||null===(r=e.match)||void 0===r||null===(n=r.params)||void 0===n?void 0:n.slug,t.t0=o,!t.t0){t.next=8;break}return t.t1=l,t.next=6,Z({slug:o});case 6:t.t2=t.sent,(0,t.t1)(t.t2);case 8:case"end":return t.stop()}}),t)}))),[]),R=d.exports.useCallback(y(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null==e||null===(r=e.match)||void 0===r||null===(n=r.params)||void 0===n?void 0:n.slug,t.t0=o,!t.t0){t.next=8;break}return t.t1=f,t.next=6,oe({slug:o});case 6:t.t2=t.sent,(0,t.t1)(t.t2);case 8:localStorage.getItem("gotoComment")&&g.current&&g.current.scrollTo({top:v.current?v.current.getBoundingClientRect().top:0});case 9:case"end":return t.stop()}}),t)}))),[]);return m.createElement("div",{className:"rvt-headerview article-detail",style:i.root,ref:g},m.createElement(M,null),w?m.createElement("div",{style:i.article},m.createElement("div",{className:"title"},c.title),m.createElement("div",{className:"f-r j-between a-center"},m.createElement("div",{className:"f-r a-center"},m.createElement(Te,{className:"user-img",src:null==c||null===(t=c.author)||void 0===t?void 0:t.image,style:i.userImg,onClick:function(e){var t;e.stopPropagation(),a.push("/profile/".concat(null==c||null===(t=c.author)||void 0===t?void 0:t.username))}}),m.createElement("div",null,m.createElement("div",{className:"header",onClick:function(e){var t;e.stopPropagation(),a.push("/profile/".concat(null==c||null===(t=c.author)||void 0===t?void 0:t.username))}},(null==c||null===(r=c.author)||void 0===r?void 0:r.username)||"示例昵称"),m.createElement("div",{className:"secd"},c.updateAt||"1小时前")))),m.createElement("div",{className:"content",style:i.articleContent},c.body),m.createElement("div",{ref:v},m.createElement(Pe,{comments:p,slug:null==e||null===(n=e.match)||void 0===n||null===(o=n.params)||void 0===o?void 0:o.slug,updateComments:R})),m.createElement(Ee,{data:c,commentCount:b,updateComments:R})):null)},default:function(){var e=Rt(),t=h(d.exports.useState([]),2),r=t[0],n=t[1],o=h(d.exports.useState({}),2),i=o[0],a=o[1],s=x();d.exports.useEffect((function(){function e(){return(e=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,ue();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var c=d.exports.useCallback((function(e){var t=e.title,r="全部"===t?null:t;a(p(p({},i),{},{tag:r}))}),[i]);return m.createElement("div",{className:"rvt-tabview"},m.createElement("div",{className:"am-navbar"},m.createElement(Et,{tags:r,onTabChange:c})),m.createElement("div",{style:{paddingTop:"36px",boxSizing:"border-box"}},m.createElement(wt,{query:i,offset:!0})),m.createElement(H,{className:"f-r j-center a-center",style:e.writeBtn,onClick:function(){return s.push("/edit")}},m.createElement(Oe,null)))}});var ye=c(d.exports.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})),be=c(d.exports.createElement("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})),xe=c(d.exports.createElement("path",{d:"M2 20h2c.55 0 1-.45 1-1v-9c0-.55-.45-1-1-1H2v11zm19.83-7.12c.11-.25.17-.52.17-.8V11c0-1.1-.9-2-2-2h-5.5l.92-4.65c.05-.22.02-.46-.08-.66-.23-.45-.52-.86-.88-1.22L14 2 7.59 8.41C7.21 8.79 7 9.3 7 9.83v7.84C7 18.95 8.05 20 9.34 20h8.11c.7 0 1.36-.37 1.72-.97l2.66-6.15z"})),we=Y((function(e){return{favouriteStyle:{fontSize:"14px",color:e.fc.active},unFavouriteStyle:{fontSize:"14px",color:e.fc.desc}}}));function Se(e){var t=e.favoritesCount,r=void 0===t?0:t,n=e.favorited,o=void 0!==n&&n,i=e.slug,a=void 0===i?"":i,s=we(),c=h(d.exports.useState(r),2),l=c[0],u=c[1],p=h(d.exports.useState(o),2),f=p[0],g=p[1];d.exports.useEffect((function(){u(r)}),[r]),d.exports.useEffect((function(){g(o)}),[o]);var v=d.exports.useCallback(function(){var e=y(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!f){e.next=10;break}return e.next=4,re({slug:a});case 4:if(e.t0=e.sent,!(e.t0>0)){e.next=8;break}u(l-1),g(!1);case 8:e.next=20;break;case 10:return e.next=12,ee({slug:a});case 12:if(e.t1=e.sent,!(e.t1>0)){e.next=19;break}O.info("点赞成功"),u(l+1),g(!0),e.next=20;break;case 19:O.info("点赞失败");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f]);return m.createElement(H,{className:"f-r a-center",onClick:v,style:f?s.favouriteStyle:s.unFavouriteStyle},m.createElement(xe,{style:{fontSize:"14px",marginRight:"4px"}})," ",l)}var Re=Y((function(e){return{icon1:{fontSize:"14px",marginRight:"4px"},action:{flex:1,boxSizing:"border-box",paddingLeft:"16px"},publishBtn:{backgroundColor:e.fc.active,height:"24px",lineHeight:"24px",padding:"0 16px",borderRadius:"12px",color:"#fff",fontSize:"12px"},mask:{height:window.innerHeight+"px",width:"100vw",position:"fixed",top:0,bottom:0,backgroundColor:"rgba(0,0,0,0.15)"},commentBar:{position:"fixed",boxSizing:"border-box",bottom:0,left:0,zIndex:3001,width:"100vw",padding:"8px 12px",backgroundColor:e.bg.pri}}}));function Ee(e){var t=e.data,r=e.updateComments,n=e.commentCount,o=h(d.exports.useState(!1),2),i=o[0],a=o[1],s=Re();return m.createElement("div",{className:"f-r a-center article-underbar"},m.createElement(H,{className:"fake-input",onClick:function(){return a(!0)}},"说点什么吧"),m.createElement("div",{className:"f-r j-around a-center",style:s.action},m.createElement("div",{className:"f-r"},m.createElement(be,{style:s.icon1}),n),m.createElement(Se,p({},t)),m.createElement("div",null,m.createElement(ye,{style:s.icon1,onClick:Ce})),i?m.createElement(ke,p({updateComments:r,onMaskClose:function(){return a(!1)}},t)):null))}function Ce(){O.info("得要微信号分享,我再想想咋整")}function ke(e){var t=e.onMaskClose,r=e.slug,n=e.updateComments,o=Re(),i=h(d.exports.useState(""),2),a=i[0],s=i[1];function c(){return(c=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ae({slug:r,body:a});case 4:e.sent>0?(O.success("发表成功"),n(),t()):O.fail("发表失败");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return g.exports.useUnactivate((function(){t()})),v.createPortal(m.createElement("div",{style:o.mask,onClick:t},m.createElement("div",{style:o.commentBar,onClick:function(e){return e.stopPropagation()}},m.createElement(B,{value:a,onChange:s,rows:3}),m.createElement("div",{className:"f-r j-end",style:{marginTop:"8px"}},m.createElement("div",{style:o.publishBtn,onClick:function(){return c.apply(this,arguments)}},"发表")))),document.body)}var _e=0;function Te(t){var r=t.src,n=u(t,e),o=h(d.exports.useState(!1),2),i=o[0],a=o[1],s=d.exports.useRef(null),c=d.exports.useRef(-1),l=d.exports.useCallback((function(){var e,t;c.current===(null===(e=s.current)||void 0===e||null===(t=e.dataset)||void 0===t?void 0:t.errtoken)&&a(!1)}),[c.current]);return d.exports.useEffect((function(){var e=_e++;s.current&&(s.current.dataset.errtoken=e),c.current=e,a(!0)}),[r]),m.createElement("img",p({ref:s,src:i?D:r,onError:l},n))}var ze=Y((function(e){return{root:{marginTop:"16px"},jiange:{height:"8px",width:"100vw",margin:"0 -16px",backgroundColor:e.bg.sec},divider:{width:"100vw",margin:"0 -16px"},header:{height:"36px",lineHeight:"36px",backgroundColor:"rgba(0,0,0,0.07)",width:window.innerWidth-32+"px",margin:"0 -16px",padding:"0 16px",fontWeight:600,color:e.fc.header},rowItem:{padding:"16px 0",position:"relative"},avatar:{marginRight:"8px"},uname:{color:e.fc.header,fontSize:"14px",fontWeight:800},body:{fontSize:"12px",marginTop:"8px",color:e.fc.text},empty:{padding:"16px 0",color:e.fc.text},delBtn:{color:e.fc.active,position:"absolute",right:"8px",top:"16px"}}}));var Pe=b((function(e){return{uinfo:e.app.uinfo}}))((function(e){var t=e.comments,r=e.uinfo,n=e.slug,o=e.updateComments,i=ze();return m.createElement("div",{style:i.root},m.createElement("div",{style:i.jiange}),m.createElement("div",{style:i.header},"评论(",t.length,")"),t.length>0?m.createElement("div",null,t.map((function(e){return m.createElement(m.Fragment,{key:e.id},m.createElement(Le,{data:e,username:r.username,slug:n,updateComments:o}),m.createElement("div",{className:"divider",style:i.divider}))}))):m.createElement(Ie,null))}));function Le(e){var t,r,n,o=e.data,i=e.username,a=e.slug,s=e.updateComments;console.log(i);var c=ze(),l=x();return m.createElement("div",{className:"f-r",style:c.rowItem},m.createElement("div",{style:c.avatar},m.createElement(Te,{src:null==o||null===(t=o.author)||void 0===t?void 0:t.image,className:"user-img",alt:"",onClick:function(e){var t;e.stopPropagation(),l.push("/profile/".concat(null==o||null===(t=o.author)||void 0===t?void 0:t.username))}})),m.createElement("div",null,m.createElement("div",{style:c.uname,onClick:function(e){var t;e.stopPropagation(),l.push("/profile/".concat(null==o||null===(t=o.author)||void 0===t?void 0:t.username))}},null==o||null===(r=o.author)||void 0===r?void 0:r.username),m.createElement("div",{style:c.body},o.body)),i===(null==o||null===(n=o.author)||void 0===n?void 0:n.username)?m.createElement("div",{style:c.delBtn,onClick:function(){var e;j.alert("提示","你要删除评论吗?",[{text:"算了",onPress:function(){return console.log("cancel")},style:"default"},{text:"删除",onPress:(e=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce({slug:a,id:o.id});case 2:e.sent<0?O.fail("删除失败"):(O.success("删除成功"),s());case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}])}},"删除"):m.createElement("div",{style:c.delBtn},"关注"))}function Ie(){var e=ze();return m.createElement("div",{style:e.empty},"内容为空")}var Ne=Y((function(e){return{root:{height:window.innerHeight+"px",backgroundColor:e.bg.pri,overflowY:"scroll"},userImg:{display:"inline-block",marginRight:"14px"},article:{padding:"0 16px",paddingBottom:"56px"},articleContent:{marginTop:"24px"},guanzhu:{color:e.fc.header}}}));var Oe=c(d.exports.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));var He=function(e,t,r,n,o,i,a,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,o,i,a,s],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}},Be=He;var De=function(e){if(Array.isArray(e))return 0===e.length;if("object"===l(e)){if(e)for(var t in!function(e){if("undefined"==typeof Symbol)return!1;return e[Symbol.iterator]}(e)||void 0===e.size||Be(!1),e)return!1;return!0}return!e},je=function(){};function Me(e,t,r){return e[t][r]}function Ve(e,t){return e[t]}var qe=function(){function e(t){S(this,e),He(t&&"function"==typeof t.rowHasChanged,"Must provide a rowHasChanged function."),this._rowHasChanged=t.rowHasChanged,this._getRowData=t.getRowData||Me,this._sectionHeaderHasChanged=t.sectionHeaderHasChanged,this._getSectionHeaderData=t.getSectionHeaderData||Ve,this._dataBlob=null,this._dirtyRows=[],this._dirtySections=[],this._cachedRowCount=0,this.rowIdentities=[],this.sectionIdentities=[]}return w(e,[{key:"cloneWithRows",value:function(e,t){var r=t?[t]:null;return this._sectionHeaderHasChanged||(this._sectionHeaderHasChanged=function(){return!1}),this.cloneWithRowsAndSections({s1:e},["s1"],r)}},{key:"cloneWithRowsAndSections",value:function(t,r,n){He("function"==typeof this._sectionHeaderHasChanged,"Must provide a sectionHeaderHasChanged function with section data."),He(!r||!n||r.length===n.length,"row and section ids lengths must be the same");var o=new e({getRowData:this._getRowData,getSectionHeaderData:this._getSectionHeaderData,rowHasChanged:this._rowHasChanged,sectionHeaderHasChanged:this._sectionHeaderHasChanged});return o._dataBlob=t,o.sectionIdentities=r||Object.keys(t),n?o.rowIdentities=n:(o.rowIdentities=[],o.sectionIdentities.forEach((function(e){o.rowIdentities.push(Object.keys(t[e]))}))),o._cachedRowCount=function(e){for(var t=0,r=0;r<e.length;r++){t+=e[r].length}return t}(o.rowIdentities),o._calculateDirtyArrays(this._dataBlob,this.sectionIdentities,this.rowIdentities),o}},{key:"getRowCount",value:function(){return this._cachedRowCount}},{key:"getRowAndSectionCount",value:function(){return this._cachedRowCount+this.sectionIdentities.length}},{key:"rowShouldUpdate",value:function(e,t){return this._dirtyRows[e][t]}},{key:"getRowData",value:function(e,t){var r=this.sectionIdentities[e],n=this.rowIdentities[e][t];return this._getRowData(this._dataBlob,r,n)}},{key:"getRowIDForFlatIndex",value:function(e){for(var t=e,r=0;r<this.sectionIdentities.length;r++){if(!(t>=this.rowIdentities[r].length))return this.rowIdentities[r][t];t-=this.rowIdentities[r].length}return null}},{key:"getSectionIDForFlatIndex",value:function(e){for(var t=e,r=0;r<this.sectionIdentities.length;r++){if(!(t>=this.rowIdentities[r].length))return this.sectionIdentities[r];t-=this.rowIdentities[r].length}return null}},{key:"getSectionLengths",value:function(){for(var e=[],t=0;t<this.sectionIdentities.length;t++)e.push(this.rowIdentities[t].length);return e}},{key:"sectionHeaderShouldUpdate",value:function(e){return this._dirtySections[e]}},{key:"getSectionHeaderData",value:function(e){if(!this._getSectionHeaderData)return null;var t=this.sectionIdentities[e];return this._getSectionHeaderData(this._dataBlob,t)}},{key:"_calculateDirtyArrays",value:function(e,t,r){for(var n,o=Ae(t),i={},a=0;a<r.length;a++){var s=t[a];je(!i[s]),i[s]=Ae(r[a])}this._dirtySections=[],this._dirtyRows=[];for(var c=0;c<this.sectionIdentities.length;c++){n=!o[s=this.sectionIdentities[c]];var l=this._sectionHeaderHasChanged;!n&&l&&(n=l(this._getSectionHeaderData(e,s),this._getSectionHeaderData(this._dataBlob,s))),this._dirtySections.push(!!n),this._dirtyRows[c]=[];for(var u=0;u<this.rowIdentities[c].length;u++){var d=this.rowIdentities[c][u];n=!o[s]||!i[s][d]||this._rowHasChanged(this._getRowData(e,s,d),this._getRowData(this._dataBlob,s,d)),this._dirtyRows[c].push(!!n)}}}}]),e}();function Ae(e){if(De(e))return{};for(var t={},r=0;r<e.length;r++){var n=e[r];je(!t[n]),t[n]=!0}return t}var We={className:R.string,prefixCls:R.string,listPrefixCls:R.string,listViewPrefixCls:R.string,style:R.object,contentContainerStyle:R.object,onScroll:R.func},Fe=function(e){function t(){var e,r,n;S(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),Ye.call(n),C(n,r)}return E(t,e),w(t,[{key:"componentWillUpdate",value:function(e){this.props.dataSource===e.dataSource&&this.props.initialListSize===e.initialListSize||!this.handleScroll||(this.props.useBodyScroll?window.removeEventListener("scroll",this.handleScroll):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.dataSource===e.dataSource&&this.props.initialListSize===e.initialListSize||!this.handleScroll||setTimeout((function(){t.props.useBodyScroll?window.addEventListener("scroll",t.handleScroll):t.ScrollViewRef.addEventListener("scroll",t.handleScroll)}),0)}},{key:"componentDidMount",value:function(){var e,t,r,n,o=this,i=function(e){return o.props.onScroll&&o.props.onScroll(e,o.getMetrics())};this.props.scrollEventThrottle&&(e=i,t=this.props.scrollEventThrottle,r=!0,n=!0,i=function(o){r&&(r=!1,setTimeout((function(){r=!0,e(o)}),t),n&&(e(o),n=!1))}),this.handleScroll=i,this.onLayout=function(){return o.props.onLayout({nativeEvent:{layout:{width:window.innerWidth,height:window.innerHeight}}})},this.props.useBodyScroll?(window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.onLayout)):this.ScrollViewRef.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.props.useBodyScroll?(window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.onLayout)):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.className,o=t.prefixCls,i=t.listPrefixCls,a=t.listViewPrefixCls,s=t.style,c=void 0===s?{}:s,l=t.contentContainerStyle,u=void 0===l?{}:l,d=t.useBodyScroll,p=t.pullToRefresh,f=o||a||"",h={ref:function(t){return e.ScrollViewRef=t||e.ScrollViewRef},style:k({},d?{}:{position:"relative",overflow:"auto",WebkitOverflowScrolling:"touch"},c),className:_(n,f+"-scrollview")},g={ref:function(t){return e.InnerScrollViewRef=t},style:k({position:"absolute",minWidth:"100%"},u),className:_(f+"-scrollview-content",i)},v=function(t){return m.cloneElement(p,{getScrollContainer:t?function(){return document.body}:function(){return e.ScrollViewRef}},r)};return d?p?m.createElement("div",h,v(!0)):m.createElement("div",h,r):p?m.createElement("div",h,m.createElement("div",g,v())):m.createElement("div",h,m.createElement("div",g,r))}}]),t}(m.Component);Fe.propTypes=We;var Ye=function(){var e=this;this.getMetrics=function(){var t=!e.props.horizontal;if(e.props.useBodyScroll){var r=document.scrollingElement?document.scrollingElement:document.body;return{visibleLength:window[t?"innerHeight":"innerWidth"],contentLength:e.ScrollViewRef?e.ScrollViewRef[t?"scrollHeight":"scrollWidth"]:0,offset:r[t?"scrollTop":"scrollLeft"]}}return{visibleLength:e.ScrollViewRef[t?"offsetHeight":"offsetWidth"],contentLength:e.ScrollViewRef[t?"scrollHeight":"scrollWidth"],offset:e.ScrollViewRef[t?"scrollTop":"scrollLeft"]}},this.getInnerViewNode=function(){return e.InnerScrollViewRef},this.scrollTo=function(){var t;e.props.useBodyScroll?(t=window).scrollTo.apply(t,arguments):(e.ScrollViewRef.scrollLeft=arguments.length<=0?void 0:arguments[0],e.ScrollViewRef.scrollTop=arguments.length<=1?void 0:arguments[1])}},Ue=function(e){function t(){return S(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),w(t,[{key:"shouldComponentUpdate",value:function(e){return e.shouldUpdate}},{key:"render",value:function(){return this.props.render()}}]),t}(m.Component),Qe=function(e){function t(){var e,r,n;S(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=n=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),Xe.call(n),C(n,r)}return E(t,e),w(t,[{key:"componentWillMount",value:function(){this.scrollProperties={visibleLength:null,contentLength:null,offset:0},this._childFrames=[],this._visibleRows={},this._prevRenderedRowsCount=0,this._sentEndForContentLength=null}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.dataSource===e.dataSource&&this.props.initialListSize===e.initialListSize||this.setState((function(r,n){return t._prevRenderedRowsCount=0,{curRenderedRowsCount:Math.min(Math.max(r.curRenderedRowsCount,e.initialListSize),e.dataSource.getRowCount())}}),(function(){return t._renderMoreRowsIfNeeded()}))}},{key:"render",value:function(){for(var e=this,t=this.props.dataSource,r=t.rowIdentities,n=[],o=0,i=0;i<r.length;i++){var a=t.sectionIdentities[i],s=r[i];if(0!==s.length){var c=void 0;if(this.props.renderSectionHeader){var l=o>=this._prevRenderedRowsCount&&t.sectionHeaderShouldUpdate(i);c=m.createElement(Ue,{key:"s_"+a,shouldUpdate:!!l,render:this.props.renderSectionHeader.bind(null,t.getSectionHeaderData(i),a)})}for(var u=[],d=0;d<s.length;d++){var p=s[d],f=a+"_"+p,h=o>=this._prevRenderedRowsCount&&t.rowShouldUpdate(i,d),g=m.createElement(Ue,{key:"r_"+f,shouldUpdate:!!h,render:this.props.renderRow.bind(null,t.getRowData(i,d),a,p,this.onRowHighlighted)});if(u.push(g),this.props.renderSeparator&&(d!==s.length-1||i===r.length-1)){var v=this.state.highlightedRow.sectionID===a&&(this.state.highlightedRow.rowID===p||this.state.highlightedRow.rowID===s[d+1]),y=this.props.renderSeparator(a,p,v);y&&u.push(y)}if(++o===this.state.curRenderedRowsCount)break}var b=m.cloneElement(this.props.renderSectionBodyWrapper(a),{className:this.props.sectionBodyClassName},u);if(this.props.renderSectionWrapper?n.push(m.cloneElement(this.props.renderSectionWrapper(a),{},c,b)):(n.push(c),n.push(b)),o>=this.state.curRenderedRowsCount)break}}var x=this.props,w=x.renderScrollComponent,S=V(x,["renderScrollComponent"]);return m.cloneElement(w(k({},S,{onScroll:this._onScroll})),{ref:function(t){return e.ListViewRef=t},onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout},this.props.renderHeader?this.props.renderHeader():null,m.cloneElement(S.renderBodyComponent(),{},n),this.props.renderFooter?this.props.renderFooter():null,S.children)}}]),t}(m.Component);Qe.DataSource=qe,Qe.propTypes=k({},Fe.propTypes,{dataSource:R.instanceOf(qe).isRequired,renderSeparator:R.func,renderRow:R.func.isRequired,initialListSize:R.number,onEndReached:R.func,onEndReachedThreshold:R.number,pageSize:R.number,renderFooter:R.func,renderHeader:R.func,renderSectionHeader:R.func,renderScrollComponent:R.func,scrollRenderAheadDistance:R.number,onChangeVisibleRows:R.func,scrollEventThrottle:R.number,renderBodyComponent:R.func,renderSectionWrapper:R.func,renderSectionBodyWrapper:R.func,sectionBodyClassName:R.string,listViewPrefixCls:R.string,useBodyScroll:R.bool}),Qe.defaultProps={initialListSize:10,pageSize:1,renderScrollComponent:function(e){return m.createElement(Fe,e)},renderBodyComponent:function(){return m.createElement("div",null)},renderSectionBodyWrapper:function(e){return m.createElement("div",{key:e})},sectionBodyClassName:"list-view-section-body",listViewPrefixCls:"rmc-list-view",scrollRenderAheadDistance:1e3,onEndReachedThreshold:1e3,scrollEventThrottle:50,scrollerOptions:{}};var Xe=function(){var e=this;this.state={curRenderedRowsCount:this.props.initialListSize,highlightedRow:{}},this.getMetrics=function(){return{contentLength:e.scrollProperties.contentLength,totalRows:e.props.dataSource.getRowCount(),renderedRows:e.state.curRenderedRowsCount,visibleRows:Object.keys(e._visibleRows).length}},this.getInnerViewNode=function(){return e.ListViewRef.getInnerViewNode()},this.scrollTo=function(){var t;e.ListViewRef&&e.ListViewRef.scrollTo&&(t=e.ListViewRef).scrollTo.apply(t,arguments)},this.onRowHighlighted=function(t,r){e.setState({highlightedRow:{sectionID:t,rowID:r}})},this._onContentSizeChange=function(t,r){var n=e.props.horizontal?t:r;n!==e.scrollProperties.contentLength&&(e.scrollProperties.contentLength=n,e._renderMoreRowsIfNeeded()),e.props.onContentSizeChange&&e.props.onContentSizeChange(t,r)},this._onLayout=function(t){var r=t.nativeEvent.layout,n=r.width,o=r.height,i=e.props.horizontal?n:o;i!==e.scrollProperties.visibleLength&&(e.scrollProperties.visibleLength=i,e._renderMoreRowsIfNeeded()),e.props.onLayout&&e.props.onLayout(t)},this._maybeCallOnEndReached=function(t){return!!(e.props.onEndReached&&e.scrollProperties.contentLength!==e._sentEndForContentLength&&e._getDistanceFromEnd(e.scrollProperties)<e.props.onEndReachedThreshold&&e.state.curRenderedRowsCount===e.props.dataSource.getRowCount())&&(e._sentEndForContentLength=e.scrollProperties.contentLength,e.props.onEndReached(t),!0)},this._renderMoreRowsIfNeeded=function(){null!==e.scrollProperties.contentLength&&null!==e.scrollProperties.visibleLength&&e.state.curRenderedRowsCount!==e.props.dataSource.getRowCount()?e._getDistanceFromEnd(e.scrollProperties)<e.props.scrollRenderAheadDistance&&e._pageInNewRows():e._maybeCallOnEndReached()},this._pageInNewRows=function(){e.setState((function(t,r){var n=Math.min(t.curRenderedRowsCount+r.pageSize,r.dataSource.getRowCount());return e._prevRenderedRowsCount=t.curRenderedRowsCount,{curRenderedRowsCount:n}}),(function(){e._prevRenderedRowsCount=e.state.curRenderedRowsCount}))},this._getDistanceFromEnd=function(e){return e.contentLength-e.visibleLength-e.offset},this._onScroll=function(t,r){e.ListViewRef&&(e.scrollProperties=r,e._maybeCallOnEndReached(t)||e._renderMoreRowsIfNeeded(),e.props.onEndReached&&e._getDistanceFromEnd(e.scrollProperties)>e.props.onEndReachedThreshold&&(e._sentEndForContentLength=null),e.props.onScroll&&e.props.onScroll(t))}};function Ke(e){window.document.body.scrollTop=e,window.document.documentElement.scrollTop=e}var Ge=function(e){function t(e){S(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Je.call(r),r.state={pageSize:e.pageSize,_delay:!1},r}return E(t,e),w(t,[{key:"componentDidMount",value:function(){this.dataChange(this.props),this.getQsInfo()}},{key:"componentWillReceiveProps",value:function(e){this.props.dataSource!==e.dataSource&&this.dataChange(e)}},{key:"componentDidUpdate",value:function(){this.getQsInfo()}},{key:"componentWillUnmount",value:function(){this._timer&&clearTimeout(this._timer),this._hCache=null}},{key:"renderQuickSearchBar",value:function(e,t){var r=this,n=this.props,o=n.dataSource,i=n.prefixCls,a=o.sectionIdentities.map((function(e){return{value:e,label:o._getSectionHeaderData(o._dataBlob,e)}}));return m.createElement("ul",{ref:function(e){return r.quickSearchBarRef=e},className:i+"-quick-search-bar",style:t,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchEnd},m.createElement("li",{"data-qf-target":e.value,onClick:function(){return r.onQuickSearchTop(void 0,e.value)}},e.label),a.map((function(e){return m.createElement("li",{key:e.value,"data-qf-target":e.value,onClick:function(){return r.onQuickSearch(e.value)}},e.label)})))}},{key:"render",value:function(){var e,t=this,r=this.state,n=r._delay,o=r.pageSize,i=this.props,a=i.className,s=i.prefixCls,c=i.children,l=i.quickSearchBarTop,u=i.quickSearchBarStyle,d=i.initialListSize,p=void 0===d?Math.min(20,this.props.dataSource.getRowCount()):d,f=i.showQuickSearchIndicator,h=i.renderSectionHeader,g=i.sectionHeaderClassName,v=V(i,["className","prefixCls","children","quickSearchBarTop","quickSearchBarStyle","initialListSize","showQuickSearchIndicator","renderSectionHeader","sectionHeaderClassName"]);return m.createElement("div",{className:s+"-container"},n&&this.props.delayActivityIndicator,m.createElement(Qe,k({},v,{ref:function(e){return t.indexedListViewRef=e},className:_(s,a),initialListSize:p,pageSize:o,renderSectionHeader:function(e,r){return m.cloneElement(h(e,r),{ref:function(e){return t.sectionComponents[r]=e},className:g||s+"-section-header"})}}),c),this.renderQuickSearchBar(l,u),f?m.createElement("div",{className:_((e={},T(e,s+"-qsindicator",!0),T(e,s+"-qsindicator-hide",!f||!this.state.showQuickSearchIndicator),e)),ref:function(e){return t.qsIndicatorRef=e}}):null)}}]),t}(m.Component);Ge.propTypes=k({},Qe.propTypes,{children:R.any,prefixCls:R.string,className:R.string,sectionHeaderClassName:R.string,quickSearchBarTop:R.object,quickSearchBarStyle:R.object,onQuickSearch:R.func,showQuickSearchIndicator:R.bool}),Ge.defaultProps={prefixCls:"rmc-indexed-list",quickSearchBarTop:{value:"#",label:"#"},onQuickSearch:function(){},showQuickSearchIndicator:!1,delayTime:100,delayActivityIndicator:""};var Je=function(){var e=this;this.onQuickSearchTop=function(t,r){e.props.useBodyScroll?Ke(0):v.findDOMNode(e.indexedListViewRef.ListViewRef).scrollTop=0,e.props.onQuickSearch(t,r)},this.onQuickSearch=function(t){var r=v.findDOMNode(e.indexedListViewRef.ListViewRef),n=v.findDOMNode(e.sectionComponents[t]);e.props.useBodyScroll?Ke(n.getBoundingClientRect().top-r.getBoundingClientRect().top+function(e){var t=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop)}while(e=e.offsetParent);return t}(r)):r.scrollTop+=n.getBoundingClientRect().top-r.getBoundingClientRect().top,e.props.onQuickSearch(t)},this.onTouchStart=function(t){e._target=t.target,e._basePos=e.quickSearchBarRef.getBoundingClientRect(),document.addEventListener("touchmove",e._disableParent,!1),document.body.className=document.body.className+" "+e.props.prefixCls+"-qsb-moving",e.updateIndicator(e._target)},this.onTouchMove=function(t){if(t.preventDefault(),e._target){var r=function(e){return e.touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),n=e._basePos,o=void 0;if(r.clientY>=n.top&&r.clientY<=n.top+e._qsHeight){var i=void 0;if((o=Math.floor((r.clientY-n.top)/e._avgH))in e._hCache&&(i=e._hCache[o][0]),i){var a=i.getAttribute("data-qf-target");e._target!==i&&(e.props.quickSearchBarTop.value===a?e.onQuickSearchTop(void 0,a):e.onQuickSearch(a),e.updateIndicator(i)),e._target=i}}}},this.onTouchEnd=function(){e._target&&(document.removeEventListener("touchmove",e._disableParent,!1),document.body.className=document.body.className.replace(new RegExp("\\s*"+e.props.prefixCls+"-qsb-moving","g"),""),e.updateIndicator(e._target,!0),e._target=null)},this.getQsInfo=function(){var t=e.quickSearchBarRef,r=t.offsetHeight,n=[];[].slice.call(t.querySelectorAll("[data-qf-target]")).forEach((function(e){n.push([e])}));for(var o=r/n.length,i=0,a=0,s=n.length;a<s;a++)i=a*o,n[a][1]=[i,i+o];e._qsHeight=r,e._avgH=o,e._hCache=n},this.sectionComponents={},this.dataChange=function(t){var r=t.dataSource.getRowCount();r&&(e.setState({_delay:!0}),e._timer&&clearTimeout(e._timer),e._timer=setTimeout((function(){e.setState({pageSize:r,_delay:!1},(function(){return e.indexedListViewRef._pageInNewRows()}))}),t.delayTime))},this.updateIndicator=function(t,r){var n=t;n.getAttribute("data-qf-target")||(n=n.parentNode),e.props.showQuickSearchIndicator&&(e.qsIndicatorRef.innerText=n.innerText.trim(),e.setState({showQuickSearchIndicator:!0}),e._indicatorTimer&&clearTimeout(e._indicatorTimer),e._indicatorTimer=setTimeout((function(){e.setState({showQuickSearchIndicator:!1})}),1e3));var o=e.props.prefixCls+"-quick-search-bar-over";e._hCache.forEach((function(e){e[0].className=e[0].className.replace(o,"")})),r||(n.className=n.className+" "+o)},this._disableParent=function(e){e.preventDefault(),e.stopPropagation()}};Qe.IndexedList=Ge;var Ze=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r},$e=q.Item;function et(e,t){var r=e.renderHeader,n=e.renderFooter,o=e.renderSectionHeader,i=e.renderBodyComponent,a=Ze(e,["renderHeader","renderFooter","renderSectionHeader","renderBodyComponent"]),s=e.listPrefixCls,c={renderHeader:null,renderFooter:null,renderSectionHeader:null,renderBodyComponent:i||function(){return d.exports.createElement("div",{className:s+"-body"})}};return r&&(c.renderHeader=function(){return d.exports.createElement("div",{className:s+"-header"},r())}),n&&(c.renderFooter=function(){return d.exports.createElement("div",{className:s+"-footer"},n())}),o&&(c.renderSectionHeader=t?function(e,t){return d.exports.createElement("div",null,d.exports.createElement($e,{prefixCls:s},o(e,t)))}:function(e,t){return d.exports.createElement($e,{prefixCls:s},o(e,t))}),{restProps:a,extraProps:c}}var tt=Qe.IndexedList,rt=function(e){function t(){return S(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),w(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.prefixCls,n=t.listPrefixCls,o=et(this.props,!0),i=o.restProps,a=o.extraProps;return d.exports.createElement(tt,k({ref:function(t){return e.indexedListRef=t},sectionHeaderClassName:r+"-section-header "+n+"-body",sectionBodyClassName:r+"-section-body "+n+"-body"},i,a),this.props.children)}}]),t}(d.exports.Component);rt.defaultProps={prefixCls:"am-indexed-list",listPrefixCls:"am-list",listViewPrefixCls:"am-list-view"};var nt=function(e){function t(){S(this,t);var e=C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.scrollTo=function(){var t;return(t=e.listviewRef).scrollTo.apply(t,arguments)},e.getInnerViewNode=function(){return e.listviewRef.getInnerViewNode()},e}return E(t,e),w(t,[{key:"render",value:function(){var e=this,t=et(this.props,!1),r=t.restProps,n=t.extraProps;return d.exports.createElement(Qe,k({ref:function(t){return e.listviewRef=t}},r,n))}}]),t}(d.exports.Component);nt.defaultProps={prefixCls:"am-list-view",listPrefixCls:"am-list"},nt.DataSource=Qe.DataSource,nt.IndexedList=rt;var ot=Object.freeze((f(Q={__proto__:null},Symbol.toStringTag,"Module"),f(Q,"default",{activateText:"松开立即刷新",deactivateText:"下拉可以刷新",finishText:"完成刷新"}),Q)),it=z(ot),at=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r},st=function(e){function t(){return S(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),w(t,[{key:"shouldComponentUpdate",value:function(e){return e.shouldUpdate}},{key:"render",value:function(){return m.createElement("div",null,this.props.render())}}]),t}(m.Component);function ct(e,t){e.transform=t,e.webkitTransform=t,e.MozTransform=t}var lt="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),ut="down",dt="up",pt={activate:"release",deactivate:"pull",release:"loading",finish:"finish"},ft=!1;try{var ht=Object.defineProperty({},"passive",{get:function(){ft=!0}});window.addEventListener("test",null,ht)}catch(Ot){}var mt=!!ft&&{passive:!1},gt=function(e){function t(){S(this,t);var e=C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={currSt:"deactivate",dragOnEdge:!1},e._isMounted=!1,e.shouldUpdateChildren=!1,e.triggerPullToRefresh=function(){!e.state.dragOnEdge&&e._isMounted&&(e.props.refreshing?(e.props.direction===dt&&(e._lastScreenY=-e.props.distanceToRefresh-1),e.props.direction===ut&&(e._lastScreenY=e.props.distanceToRefresh+1),e.setState({currSt:"release"},(function(){return e.setContentStyle(e._lastScreenY)}))):e.setState({currSt:"finish"},(function(){return e.reset()})))},e.init=function(t){t&&(e._to={touchstart:e.onTouchStart.bind(e,t),touchmove:e.onTouchMove.bind(e,t),touchend:e.onTouchEnd.bind(e,t),touchcancel:e.onTouchEnd.bind(e,t)},Object.keys(e._to).forEach((function(r){t.addEventListener(r,e._to[r],mt)})))},e.destroy=function(t){e._to&&t&&Object.keys(e._to).forEach((function(r){t.removeEventListener(r,e._to[r])}))},e.onTouchStart=function(t,r){e._ScreenY=e._startScreenY=r.touches[0].screenY,e._startScreenX=r.touches[0].screenX,e._lastScreenY=e._lastScreenY||0},e.isEdge=function(t,r){var n=e.props.getScrollContainer();if(n&&n===document.body){var o=document.scrollingElement?document.scrollingElement:document.body;if(r===dt)return o.scrollHeight-o.scrollTop<=window.innerHeight;if(r===ut)return o.scrollTop<=0}return r===dt?t.scrollHeight-t.scrollTop===t.clientHeight:r===ut?t.scrollTop<=0:void 0},e.damping=function(t){return Math.abs(e._lastScreenY)>e.props.damping?0:t*=(1-Math.abs(e._ScreenY-e._startScreenY)/window.screen.height)*e.props.scale},e.onTouchMove=function(t,r){var n=r.touches[0].screenY,o=r.touches[0].screenX,i=e.props.direction;if(!(Math.abs(o-e._startScreenX)>20*window.devicePixelRatio)&&!(i===dt&&e._startScreenY<n||i===ut&&e._startScreenY>n)&&e.isEdge(t,i)){e.state.dragOnEdge||(e._ScreenY=e._startScreenY=r.touches[0].screenY,e.setState({dragOnEdge:!0})),r.preventDefault();var a=Math.round(n-e._ScreenY);e._ScreenY=n,e._lastScreenY+=e.damping(a),e.setContentStyle(e._lastScreenY),Math.abs(e._lastScreenY)<e.props.distanceToRefresh?"deactivate"!==e.state.currSt&&e.setState({currSt:"deactivate"}):"deactivate"===e.state.currSt&&e.setState({currSt:"activate"}),lt&&r.changedTouches[0].clientY<0&&e.onTouchEnd()}},e.onTouchEnd=function(){e.state.dragOnEdge&&e.setState({dragOnEdge:!1}),"activate"===e.state.currSt?(e.setState({currSt:"release"}),e._timer=setTimeout((function(){e.props.refreshing||e.setState({currSt:"finish"},(function(){return e.reset()})),e._timer=void 0}),1e3),e.props.onRefresh()):e.reset()},e.reset=function(){e._lastScreenY=0,e.setContentStyle(0)},e.setContentStyle=function(t){e.contentRef&&ct(e.contentRef.style,"translate3d(0px,"+t+"px,0)")},e}return E(t,e),w(t,[{key:"shouldComponentUpdate",value:function(e){return this.shouldUpdateChildren=this.props.children!==e.children,!0}},{key:"componentDidUpdate",value:function(e){e!==this.props&&e.refreshing!==this.props.refreshing&&this.triggerPullToRefresh()}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.init(e.props.getScrollContainer()||e.containerRef),e.triggerPullToRefresh(),e._isMounted=!0}))}},{key:"componentWillUnmount",value:function(){this.destroy(this.props.getScrollContainer()||this.containerRef)}},{key:"render",value:function(){var e=this,t=k({},this.props);delete t.damping;var r=t.className,n=t.prefixCls,o=t.children,i=t.getScrollContainer,a=t.direction;t.onRefresh,t.refreshing;var s=t.indicator;t.distanceToRefresh;var c=at(t,["className","prefixCls","children","getScrollContainer","direction","onRefresh","refreshing","indicator","distanceToRefresh"]),l=m.createElement(st,{shouldUpdate:this.shouldUpdateChildren,render:function(){return o}}),u=function(t){var r=_(t,!e.state.dragOnEdge&&n+"-transition");return m.createElement("div",{className:n+"-content-wrapper"},m.createElement("div",{className:r,ref:function(t){return e.contentRef=t}},a===dt?l:null,m.createElement("div",{className:n+"-indicator"},s[e.state.currSt]||pt[e.state.currSt]),a===ut?l:null))};return i()?u(n+"-content "+n+"-"+a):m.createElement("div",k({ref:function(t){return e.containerRef=t},className:_(r,n,n+"-"+a)},c),u(n+"-content"))}}]),t}(m.Component);gt.defaultProps={prefixCls:"rmc-pull-to-refresh",getScrollContainer:function(){},direction:ut,distanceToRefresh:25,damping:100,indicator:pt,scale:.6};var vt=function(e){function t(){return S(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),w(t,[{key:"render",value:function(){var e=A(this.props,this.context,"PullToRefresh",(function(){return it})),t=e.activateText,r=e.deactivateText,n=e.finishText,o=k({activate:t,deactivate:r,release:d.exports.createElement(P,{type:"loading"}),finish:n},this.props.indicator);return d.exports.createElement(gt,k({},this.props,{indicator:o}))}}]),t}(d.exports.Component);function yt(e){return m.createElement(vt,p({},e))}vt.defaultProps={prefixCls:"am-pull-to-refresh"},vt.contextTypes={antLocale:L.exports.object};var bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(p,e);var a,c,l,u=i(p);function p(){var e;r(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return f(s(e=u.call.apply(u,[this].concat(o))),"state",{dataSource:new nt.DataSource({rowHasChanged:function(e,t){return e!==t}}),refreshing:!0,isLoading:!0,pagination:e.props.defaultPagination||{pageNum:0,pageSize:20,total:0},height:0}),f(s(e),"rData",[]),f(s(e),"calcRef",d.exports.createRef()),f(s(e),"onResize",(function(){var t=e.calcRef.current.getBoundingClientRect().top,r=window.innerHeight;e.setState({height:r-t-(e.props.offset?50:0)})})),f(s(e),"getData",y(regeneratorRuntime.mark((function r(){var n,o,i,a,s,c,l=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:e.state.pagination.pageNum+1,o=l.length>1&&void 0!==l[1]?l[1]:e.state.pagination.pageSize,i=e.props.getDataMethod,r.next=5,i({pageNum:n,pageSize:o});case 5:if(a=r.sent,s=a.list,c=a.total,0!==n){r.next=12;break}return e.rData=t(s),e.setState({dataSource:new nt.DataSource({rowHasChanged:function(e,t){return e!==t}}).cloneWithRows(s),refreshing:!1,isLoading:!1,pagination:{total:c,pageNum:n,pageSize:o}}),r.abrupt("return");case 12:s.length>0?(e.rData=[].concat(t(e.rData),t(s)),e.setState({dataSource:e.state.dataSource.cloneWithRows(e.rData),refreshing:!1,isLoading:!1,pagination:{total:c,pageNum:n,pageSize:o}})):e.setState({refreshing:!1,isLoading:!1});case 13:case"end":return r.stop()}}),r)})))),f(s(e),"onRefresh",(function(){e.setState({refreshing:!0,isLoading:!0}),e.getData(0)})),f(s(e),"onEndReached",(function(){e.state.isLoading||e.rData.length>=e.state.pagination.total||(e.setState({isLoading:!0}),e.getData())})),e}return a=p,(c=[{key:"componentDidMount",value:function(){this.props.apiRef&&(this.props.apiRef.current={getData:this.getData}),this.getData(0),this.onResize(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){var e=this.state,t=e.dataSource,r=e.pagination,n=e.refreshing,o=e.isLoading,i=this.props,a=i.renderRow,s=i.contentContainerStyle,c=void 0===s?{}:s,l=i.renderSeparator,u=void 0===l?function(e,t){return m.createElement("div",{key:"".concat(e,"-").concat(t),className:"list-gap"})}:l;return m.createElement("div",{ref:this.calcRef,className:"pull-list"},m.createElement(nt,{dataSource:t,contentContainerStyle:c,renderFooter:function(){return m.createElement("div",{className:"pull-list-footer"},o?"加载中...":"已经没有更多数据了")},renderRow:a,renderSeparator:u,useBodyScroll:!1,style:{height:this.state.height+"px"},pullToRefresh:m.createElement(yt,{refreshing:n,onRefresh:this.onRefresh}),onEndReached:this.onEndReached,pageSize:r.pageSize}))}}])&&n(a.prototype,c),l&&n(a,l),p}(d.exports.Component),xt=Y((function(e){return{contentContainerStyle:{boxSizing:"border-box"},root:{backgroundColor:e.bg.pri,padding:"16px",borderBottom:"1px solid rgba(57, 60, 67, 0.08)"},userImg:{display:"inline-block",marginRight:"14px"},actionBar:{marginTop:"16px"},icon1:{fontSize:"14px",color:e.fc.desc,marginRight:"40px"},guanzhu:{color:e.fc.header}}}));function wt(e){var t=e.query,r=e.offset,n=xt(),o=d.exports.useRef(null),i=x();d.exports.useEffect((function(){o.current.getData(0)}),[t]);var a=d.exports.useCallback(function(){var e=y(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(p(p({},r),t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),s=d.exports.useCallback((function(e){if(!e.slug)return O.info("没有slug");localStorage.removeItem("gotoComment"),i.push("/posts/".concat(e.slug))}),[]),c=d.exports.useMemo((function(){return function(e,t,r){var o,a;return m.createElement("div",{className:"article-row-item",style:n.root,onClick:function(){return s(e)}},m.createElement("div",{className:"f-r j-between a-center"},m.createElement("div",{className:"f-r a-center",onClick:function(t){var r;t.stopPropagation(),i.push("/profile/".concat(null==e||null===(r=e.author)||void 0===r?void 0:r.username))}},m.createElement(Te,{className:"user-img",src:null==e||null===(o=e.author)||void 0===o?void 0:o.image,style:n.userImg}),m.createElement("div",null,m.createElement("div",{className:"header"},(null==e||null===(a=e.author)||void 0===a?void 0:a.username)||"示例昵称"),m.createElement("div",{className:"secd"},e.updateAt||"1小时前")))),m.createElement("div",{className:"title"},e.title||"我是一个标题"),m.createElement("div",{className:"content hidecontent"},e.description||St),m.createElement("div",{className:"f-r j-end",style:n.actionBar},m.createElement("div",{className:"f-r j-center a-center",onClick:function(t){t.stopPropagation(),s(e),localStorage.setItem("gotoComment","1")}},m.createElement(be,{style:n.icon1})),m.createElement(Se,p({},e))))}}),[n]),l=d.exports.useMemo((function(){return function(e,t){return m.createElement("div",{key:"".concat(e,"-").concat(t),className:"article-list-gap"})}}),[]);return m.createElement("div",null,m.createElement(bt,{apiRef:o,offset:r,getDataMethod:a,renderRow:c,renderSeparator:l,contentContainerStyle:n.contentContainerStyle}))}var St="你知道吗，每刷新1次，你的页面就变成了新的，刷新2次，就会变2次",Rt=Y((function(e){return{tabBarTextStyle:{padding:0,height:"36px",lineHeight:"36px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",textAlign:"center",fontSize:"14px"},writeBtn:{position:"fixed",bottom:"64px",right:"8px",height:"48px",width:"48px",fontSize:"24px",borderRadius:"24px",color:"#fff",backgroundImage:" linear-gradient(0deg, rgb(255,91,91),rgb(255,131,101))",transform:"rotateZ(-45deg)"}}}));function Et(e){var r=e.tags,n=e.onTabChange,o=Rt(),i=d.exports.useMemo((function(){return[{title:"全部"}].concat(t(r.map((function(e){return{title:e}}))))}),[r]);return m.createElement(I,{tabs:i,tabBarTextStyle:o.tabBarTextStyle,initialPage:0,onChange:n})}var Ct=c(d.exports.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})),kt=Y((function(e){return{root:{paddingTop:"36px"},tabBarTextStyle:{padding:0,height:"36px",lineHeight:"36px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",textAlign:"center",fontSize:"14px"}}}));function _t(e){var t=e.username,r=e.type,n=void 0===r?"0":r,o=kt(),i=h(d.exports.useState("0"===n?{author:t}:{favorited:t}),2),a=i[0],s=i[1],c=d.exports.useCallback((function(e){var r=e.title;"我的文章"===r?s({author:t}):"我喜欢的文章"===r&&s({favorited:t})}),[]);return m.createElement("div",null,m.createElement(I,{tabs:[{title:"我的文章"},{title:"我喜欢的文章"}],tabBarTextStyle:o.tabBarTextStyle,initialPage:Number(n),onChange:c}),m.createElement(wt,{query:a,offset:!0}))}var Tt=Y((function(e){return{btn:{fontSize:"12px",color:"#56ba68",height:"24px",lineHeight:"24px",padding:"0 8px",borderRadius:"12px",border:"1px solid #56ba68",transition:"0.3s"},activeBtn:{fontSize:"12px",color:"#fff",height:"24px",lineHeight:"24px",padding:"0 8px",borderRadius:"12px",backgroundColor:" #56ba68",border:"1px solid #56ba68",transition:"0.3s"}}}));function zt(e){var t=e.following,r=e.username,n=Tt(),o=h(d.exports.useState(t),2),i=o[0],a=o[1];function s(){return(s=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he({username:r});case 2:if(e.t0=e.sent,!("following"in e.t0)){e.next=8;break}a(!0),O.info("关注成功"),e.next=9;break;case 8:O.info("关注失败");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge({username:r});case 2:if(e.t0=e.sent,!("following"in e.t0)){e.next=8;break}a(!1),O.info("取消关注成功"),e.next=9;break;case 8:O.info("取消关注失败");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(i,t),d.exports.useEffect((function(){a(t)}),[t]),m.createElement("div",null,i?m.createElement("div",{style:n.activeBtn,onClick:function(){return c.apply(this,arguments)}},"已关注"):m.createElement("div",{style:n.btn,onClick:function(){return s.apply(this,arguments)}},"关注"))}var Pt=Y((function(e){return{header:{position:"relative",height:"20vh",backgroundImage:"url(".concat("/realword-front.github.io/assets/maoboli.2da01a31.jpeg",")"),backgroundSize:"cover"},backBtn:{position:"absolute",fontSize:"18px",top:"16px",left:"16px",color:"#fff"},viteImg:{height:"50%",objectFit:"contain"},profileDiv:{padding:"16px",backgroundColor:e.bg.pri,position:"relative"},avatar:{boxSizing:"border-box",border:"3px solid ".concat(e.bg.pri),position:"absolute",top:"-32px",left:"16px"},editBtn:{fontSize:"12px",color:"#56ba68",height:"24px",lineHeight:"24px",padding:"0 8px",borderRadius:"12px",border:"1px solid #56ba68",transition:"0.3s"},username:{fontSize:"18px",color:e.fc.header,marginBottom:"6px"},bio:{fontSize:"14px",color:e.fc.text}}}));a("Profile",b((function(e){return{uinfo:e.app.uinfo}}))((function(e){var t=Pt(),r=x(),n=h(d.exports.useState({}),2),o=n[0],i=n[1];d.exports.useEffect((function(){a()}),[]);var a=d.exports.useCallback(y(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i,t.next=3,pe({username:e.match.params.username});case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)}))),[]);return m.createElement("div",null,m.createElement("div",{style:t.header,className:"f-r j-center a-center"},m.createElement(Ct,{style:t.backBtn,onClick:r.goBack}),m.createElement("img",{style:t.viteImg,src:"/realword-front.github.io/assets/favicon.17e50649.svg"})),m.createElement("div",{style:t.profileDiv},m.createElement(Te,{className:"user-img lg",style:t.avatar,src:o.image}),m.createElement("div",{className:"f-r j-end"},o.username===e.uinfo.username?m.createElement("div",{style:t.editBtn,onClick:function(){return r.push("/account/".concat(e.uinfo.username))}},"编辑资料"):m.createElement(zt,{following:o.following,username:o.username})),m.createElement("div",null,m.createElement("div",{style:t.username},o.username||"..."),m.createElement("div",{style:t.bio},o.bio||"暂无简介"))),m.createElement(_t,{username:e.match.params.username}))})));var Lt=c(d.exports.createElement("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7zm11.77 8.27L13 19.54l-4.27-4.27C8.28 14.81 8 14.19 8 13.5c0-1.38 1.12-2.5 2.5-2.5.69 0 1.32.28 1.77.74l.73.72.73-.73c.45-.45 1.08-.73 1.77-.73 1.38 0 2.5 1.12 2.5 2.5 0 .69-.28 1.32-.73 1.77z"})),It=Y((function(e){return{root:{height:window.innerHeight+"px",boxSizing:"border-box",paddingTop:"36px"},list:{height:"100%"},input:{fontSize:"16px",fontWeight:400},tagInput:{fontSize:"12px",fontWeight:400},body:{flex:1},leftContenr:{fontSize:"14px",color:e.fc.desc},rightBtn:{fontSize:"14px",color:e.fc.active},tagList:{overflowX:"scroll"}}}));a("Edit",W()((function(e){var t,r=e.form,n=e.match,o=It(),i=r.getFieldProps,a=r.getFieldValue,s=x(),c=d.exports.useMemo((function(){return n.params.slug}),[n.params.slug]);function l(){return(l=y(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z({slug:c});case 2:t=e.sent,r.setFieldsValue(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=y(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.validateFields();case 3:if(t=e.sent,n="",!c){e.next=11;break}return e.next=8,G(t);case 8:n=e.sent,e.next=14;break;case 11:return e.next=13,G(t);case 13:n=e.sent;case 14:n?O.info("提交成功,快去看你的文章吧",3,(function(){s.push("/posts/".concat(n))})):O.info("提交失败"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),e.t0.errors&&(o=Object.values(e.t0.errors).map((function(e){return e.errors.map((function(e){return e.message}))})).join(""),O.fail(o));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}return d.exports.useEffect((function(){c&&function(){l.apply(this,arguments)}()}),[]),m.createElement("div",{style:o.root},m.createElement(M,{leftContent:m.createElement("div",{style:o.leftContenr},(null===(t=a("body"))||void 0===t?void 0:t.length)||0,"字"),rightContent:m.createElement("div",{style:o.rightBtn,onClick:function(){return u.apply(this,arguments)}},"发布")}),m.createElement(q,{className:"fcList",style:o.list},m.createElement(F,p(p({style:o.input},i("title",{rules:[{required:!0,message:"标题不能为空!"},{max:20,message:"标题不能大于20字!"}]})),{},{placeholder:"请输入标题"})),m.createElement(Nt,p(p({style:o.tagInput},i("tagList",{rules:[{required:!0,message:"邮箱不能为空!"}]})),{},{placeholder:"请输入标签"})),m.createElement(B,p(p({},i("description")),{},{rows:2,placeholder:"请输入简介"})),m.createElement(B,p(p({className:"f1",autoHeight:!0},i("body",{rules:[{required:!0,message:"正文不能为空!"}]})),{},{placeholder:"请输入正文"}))))})));function Nt(e){var r=e.value,n=void 0===r?[]:r,o=e.onChange,i=It(),a=h(d.exports.useState(""),2),s=a[0],c=a[1];return m.createElement("div",null,m.createElement(F,{value:s,onChange:c,style:i.tagInput,extra:m.createElement(Lt,{style:{fontSize:"16px"},onClick:function(){return s?n.length>2?O.info("标签不能大于3个!"):s.length>10?O.info("标签内容不能大于10字!"):(o([].concat(t(n),[s])),void c("")):O.info("标签内容不能为空!")}}),placeholder:"请输入标签"}),m.createElement(q.Item,null,m.createElement("div",{style:i.tagList},n.map((function(e,t){return m.createElement("div",{onClick:function(){return function(e){j.alert("提示","确定要删除标签?",[{text:"算了",onPress:function(){return console.log("cancel")},style:"default"},{text:"确定",onPress:function(){n.splice(e,1),o(n)}}])}(t)},className:"tag"},e)})))))}}}}))}();
