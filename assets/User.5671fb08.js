var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,i=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(n)for(var r of n(t))o.call(t,r)&&l(e,r,t[r]);return e},s=(e,n)=>t(e,r(n)),c=("undefined"!=typeof require&&require,(e,t,r)=>new Promise(((n,a)=>{var o=e=>{try{i(r.next(e))}catch(t){a(t)}},l=e=>{try{i(r.throw(e))}catch(t){a(t)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,l);i((r=r.apply(e,t)).next())})));import{o as p,c as d,z as m,x as u,D as g,s as f,F as h,G as x,E as y,q as b,u as v,R as E,a7 as k}from"./vendor.9cecd84c.js";import{C as w,d as C,L as j,M as z,_ as N,R as O,i as S,c as B,I as P,T as H}from"./propTypes.6a7638d0.js";import{S as T,t as A,a as F,C as L,m as R,s as V}from"./index.bcb53b00.js";var I=p(d.exports.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),M=p(d.exports.createElement(d.exports.Fragment,null,d.exports.createElement("path",{d:"M17.11 10.83l-2.47-.21-1.2-.1-.47-1.11L12 7.13l-.97 2.28-.47 1.11-1.2.1-2.47.21 1.88 1.63.91.79-.27 1.17-.57 2.42 2.13-1.28 1.03-.63 1.03.63 2.13 1.28-.57-2.42-.27-1.17.91-.79z",opacity:".3"}),d.exports.createElement("path",{d:"M22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zm-7.41 5.18l.56 2.41-2.12-1.28-1.03-.62-1.03.62-2.12 1.28.56-2.41.27-1.18-.91-.79-1.88-1.63 2.47-.21 1.2-.1.47-1.11.97-2.27.97 2.29.47 1.11 1.2.1 2.47.21-1.88 1.63-.91.79.27 1.16z"}))),q=p(d.exports.createElement(d.exports.Fragment,null,d.exports.createElement("path",{d:"M13 4H6v16h12V9h-5V4zm3 14H8v-2h8v2zm0-6v2H8v-2h8z",opacity:".3"}),d.exports.createElement("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"}))),$=p(d.exports.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})),_=p(d.exports.createElement("path",{d:"M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"})),W=function(e){function t(){u(this,t);var e=g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onChange=function(t){var r=t.target.checked;e.props.onChange&&e.props.onChange(r)},e.onClick=function(t){if(e.props.onClick){var r=void 0;r=t&&t.target&&void 0!==t.target.checked?t.target.checked:e.props.checked,e.props.onClick(r)}},e}return m(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,r=e.name,n=e.checked,a=e.disabled,o=e.className,l=e.platform,i=e.color,s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(r[n[a]]=e[n[a]])}return r}(e,["prefixCls","name","checked","disabled","className","platform","color"]),c=h(t,o,x({},t+"-android","android"===l)),p=h("checkbox",x({},"checkbox-disabled",a)),m=Object.keys(s).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=s[t]),e}),{}),u=this.props.style||{};return i&&n&&(u.backgroundColor=i),d.exports.createElement("label",{className:c},d.exports.createElement("input",y({type:"checkbox",name:r,className:t+"-checkbox",disabled:a,checked:n,onChange:this.onChange,value:n?"on":"off"},a?{}:{onClick:this.onClick},m)),d.exports.createElement("div",y({className:p,style:u},a?{onClick:this.onClick}:{})))}}]),t}(d.exports.Component);function D(e){return document.body.className="rvt-body-"+e,A(e),{type:F,data:e}}function G(e){return{type:T,data:e}}function U(){return{type:L}}W.defaultProps={prefixCls:"am-switch",name:"",checked:!1,disabled:!1,onChange:function(){},platform:"ios",onClick:function(){}};const J=R((e=>({root:{},header:{position:"relative",height:"50px",boxSizing:"border-box",padding:"0 16px"},headerBg:{height:"80px",width:"120%",position:"absolute",top:0,left:"-10%",zIndex:0,borderBottomLeftRadius:"50%",borderBottomRightRadius:"50%",backgroundImage:"linear-gradient(to right,rgb(233,136,100) 10%, rgba(237,109,97) 90%"},headerIcon:{color:"#fff",fontSize:"18px"},card:{position:"relative",flex:1,margin:"0 16px",marginBottom:"16px",boxSizing:"border-box",padding:"16px",backgroundColor:e.bg.pri,borderRadius:"8px",boxShadow:"0 2px 4px 4px rgb(0 0 0 / 15%)"},avatar:{marginRight:"8px"},articleBtn:{flex:1,color:e.fc.desc},red:{color:e.fc.active},yellow:{color:"rgb(245,197,100)"}})));function K(){window.open("https://gitee.com/boboanzuiniubi/react-vite-template","_blank")}var Q=b((e=>({uinfo:e.app.uinfo,theme:e.app.theme})),(e=>k({setTheme:D,clearUinfo:U},e)))((function({uinfo:e,theme:t,setTheme:r,clearUinfo:n}){const a=J(),o=v();function l(e){o.push(`/myArticles/${e}`)}return E.createElement("div",{className:"f-c"},E.createElement("div",{style:a.headerBg}),E.createElement("div",{className:"f-r j-between a-center",style:a.header},E.createElement(_,{style:a.headerIcon,onClick:K}),E.createElement(w,null,E.createElement($,{style:a.headerIcon,onClick:function(){o.push("/edit")}}))),E.createElement("div",{className:"mine-card ",style:a.card},E.createElement(w,{className:"f-r a-center",onClick:()=>o.push(`/profile/${e.username}`)},E.createElement("img",{className:"user-img",style:a.avatar,src:e.image||C}),E.createElement("div",null,E.createElement("div",{className:"header"},e.username||"点击登录"),E.createElement("div",{className:"secd"},"real world demo 的神"))),E.createElement("div",{className:"divider"}),E.createElement("div",{className:"f-r"},E.createElement(w,{onClick:()=>l(0),style:a.articleBtn,className:"f-c a-center"},E.createElement(q,{style:a.red}),E.createElement("div",null,"我的文章")),E.createElement(w,{onClick:()=>l(1),style:a.articleBtn,className:"f-c a-center"},E.createElement(M,{style:a.yellow}),E.createElement("div",null,"我的收藏")))),E.createElement("div",null,E.createElement(j.Item,{extra:E.createElement(W,{checked:"dark"===t,onChange:e=>{r(e?"dark":"light")}})},"深色模式"),e.token?E.createElement(j.Item,{extra:E.createElement(I,null),onClick:function(){z.alert("退出登陆","确定要退出登陆吗",[{text:"算了",onPress:()=>console.log("cancel"),style:"default"},{text:"确定",onPress:()=>{n(),N.info("您已登出")}}])}},"退出当前账号"):null))}));const X=R((e=>({root:{height:window.innerHeight+"px",boxSizing:"border-box",paddingTop:"36px"},page:{padding:"36px"},title:{fontSize:"18px",fontWeight:600,color:e.fc.text,textAlign:"center"},img:{flex:1,objectFit:"contain"},a:{color:e.fc.active,textAlign:"center"},registBtn:{marginTop:"36px",width:"100%",height:"32px",lineHeight:"32px",backgroundColor:"#56ba68",color:"#fff",textAlign:"center"},login:{marginTop:"24px",color:e.fc.text}})));function Y(){const e=X(),t=v();return E.createElement("div",{style:e.root},E.createElement(O,{title:"登陆/注册"}),E.createElement("div",{className:"f-c",style:e.page},E.createElement("p",{style:e.title}," RealWorld demo 的王"),E.createElement("img",{style:e.img,src:"/realword-front.github.io/assets/realworld.44e25a38.png",alt:""}),E.createElement("a",{style:e.a,href:"https://github.com/gothinkster/realworld"},"Git地址：https://github.com/gothinkster/realworld"),E.createElement("div",{style:e.registBtn,onClick:()=>t.push("/register")},"立即注册"),E.createElement("div",{style:e.login,className:"f-r j-center"},E.createElement("span",null,"已有realworld账号？"),E.createElement("a",{style:e.a,onClick:()=>t.push("/login")},"去登陆"))))}const Z=R((e=>({root:{height:window.innerHeight+"px",boxSizing:"border-box",paddingTop:"36px"},page:{padding:"36px"},title:{fontSize:"18px",fontWeight:600,color:e.fc.text,textAlign:"center"},input:{fontSize:"14px"},registBtn:{marginTop:"36px",width:"100%",height:"32px",lineHeight:"32px",borderRadius:"18px",backgroundColor:e.fc.active,color:"#fff",textAlign:"center"},login:{marginTop:"24px",color:e.fc.text},a:{color:e.fc.active,textAlign:"center"}})));var ee=B()((function({form:e}){const t=Z(),{getFieldProps:r}=e,n=v(),a=d.exports.useCallback((()=>c(this,null,(function*(){try{const t=yield e.validateFields();yield function(e){return c(this,arguments,(function*({username:e,email:t,password:r}){try{return(yield S.post("/users",{user:{username:e,email:t,password:r}},{loading:!0})).data.user&&N.info("注册成功",3,(function(){history.go(history.length),window.location.replace("/login")})),1}catch(n){if(n.response.data.errors){const e=Object.entries(n.response.data.errors).reduce(((e,[t,r])=>[...e,`${t}:${r.join("")}`]),[]).join("\n");N.fail(e)}return-1}}))}(t)}catch(t){if(t.errors){const e=Object.values(t.errors).map((e=>e.errors.map((e=>e.message)))).join("");N.fail(e)}}}))),[]);return E.createElement("div",{style:t.root,className:"login-page"},E.createElement(O,{title:"注册账号"}),E.createElement("div",{className:"f-c",style:t.page},E.createElement("div",{style:t.title},"注册账号"),E.createElement(j,null,E.createElement(P,s(i({style:t.input},r("username",{})),{placeholder:"input your username"})),E.createElement(P,s(i({style:t.input},r("email",{})),{placeholder:"input your email"})),E.createElement(P,s(i({style:t.input},r("password",{})),{placeholder:"input your password"}))),E.createElement("div",{style:t.registBtn,onClick:a},"注册"),E.createElement("div",{style:t.login,className:"f-r j-center"},E.createElement("span",null,"已有账号？"),E.createElement("a",{style:t.a,onClick:()=>n.push("/login")},"去登陆"))))}));const te=R((e=>({root:{height:window.innerHeight+"px",boxSizing:"border-box",paddingTop:"36px"},page:{padding:"36px"},title:{fontSize:"18px",fontWeight:600,color:e.fc.text,textAlign:"center"},input:{fontSize:"14px"},registBtn:{marginTop:"36px",width:"100%",height:"32px",lineHeight:"32px",borderRadius:"18px",backgroundColor:e.fc.active,color:"#fff",textAlign:"center"},login:{marginTop:"24px",color:e.fc.text},a:{color:e.fc.active,textAlign:"center"}})));var re=B()((function({form:e}){const t=te(),{getFieldProps:r}=e,n=v(),a=d.exports.useCallback((()=>c(this,null,(function*(){try{const t=yield e.validateFields();yield function(e){return c(this,arguments,(function*({email:e,password:t}){try{const r=yield S.post("/users/login",{user:{email:e,password:t}},{loading:!0});return r.data.user&&(V.dispatch(G(r.data.user)),history.go(history.length),window.location.replace("/f/home")),1}catch(r){if(r.response.data.errors){const e=Object.entries(r.response.data.errors).reduce(((e,[t,r])=>[...e,`${t}:${r.join("")}`]),[]).join("\n");N.fail(e)}return-1}}))}(t)}catch(t){if(t.errors){const e=Object.values(t.errors).map((e=>e.errors.map((e=>e.message)))).join("");N.fail(e)}}}))),[]);return E.createElement("div",{style:t.root,className:"login-page"},E.createElement(O,{title:"登陆"}),E.createElement("div",{className:"f-c",style:t.page},E.createElement("div",{style:t.title},"登陆"),E.createElement(j,null,E.createElement(P,s(i({style:t.input},r("email",{rules:[{required:!0,message:"邮箱不能为空!"}]})),{placeholder:"input your email"})),E.createElement(P,s(i({style:t.input},r("password",{rules:[{required:!0,message:"密码不能为空!"}]})),{placeholder:"input your password",type:"password"}))),E.createElement("div",{style:t.registBtn,onClick:a},"登陆"),E.createElement("div",{style:t.login,className:"f-r j-center"},E.createElement("span",null,"还没有账号？"),E.createElement("a",{style:t.a,onClick:()=>n.push("/register")},"去注册"))))}));const ne=R((e=>({root:{height:window.innerHeight+"px",boxSizing:"border-box",paddingTop:"36px",backgroundColor:e.bg.sec},leftContent:{fontSize:"14px",color:e.fc.desc},rightBtn:{fontSize:"14px",color:e.fc.active},input:{fontSize:"14px"}})));var ae=B()(b((e=>({uinfo:e.app.uinfo})))((function({uinfo:e,form:t}){const r=ne(),{getFieldProps:n,getFieldValue:a}=t,o=v();return E.createElement("div",{style:r.root},E.createElement(O,{leftContent:E.createElement("div",{style:r.leftContent},"编辑个人资料"),rightContent:E.createElement("div",{style:r.rightBtn,onClick:function(){return c(this,null,(function*(){try{const e=yield t.validateFields();(yield function(e){return c(this,arguments,(function*({username:e,email:t,bio:r,image:n,token:a}){try{const o=yield S.put("/user",{user:{username:e,email:t,bio:r,image:n,token:a}});return o.data.user&&V.dispatch(G(o.data.user)),1}catch(o){if(o.response.data.errors){const e=Object.entries(o.response.data.errors).reduce(((e,[t,r])=>[...e,`${t}:${r.join("")}`]),[]).join("\n");N.fail(e)}return-1}}))}(e))&&N.success("修改成功",3,(()=>o.goBack()))}catch(e){if(e.errors){const t=Object.values(e.errors).map((e=>e.errors.map((e=>e.message)))).join("");N.fail(t)}}}))}},"修改")}),E.createElement(j,{className:"fcList"},E.createElement(P,s(i({style:r.input},n("username",{initialValue:e.username,rules:[{required:!0,message:"用户名不能为空!"},{max:20,message:"用户名不能大于20字!"}]})),{placeholder:"请输入用户名"}),"用户名"),E.createElement(H,s(i({title:"用户头像"},n("image",{initialValue:e.image})),{rows:2,style:r.input,placeholder:"请输入用户头像url"})),E.createElement(H,s(i({title:"简介",rows:3},n("bio",{initialValue:e.bio})),{style:r.input,placeholder:"请输入简介"})),E.createElement(P,s(i({title:"邮箱",style:r.input},n("email",{initialValue:e.email,rules:[{required:!0,message:"邮箱不能为空!"}]})),{placeholder:"请输入邮箱"}),"邮箱"),E.createElement(P,s(i({title:"密码",type:"password",style:r.input},n("password",{rules:[{required:!0,message:"密码不能为空!"}]})),{placeholder:"请输入密码"}),"密码")))})));export{ae as Account,re as Login,Y as RealWorldLogin,ee as Register,Q as default};
